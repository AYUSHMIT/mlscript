:AllowParseErrors
:AllowTypeErrors

1
//│ |1|
//│ Parsed: 1

f 1
//│ |f| |1|
//│ Parsed: (f (1,))

1 + 1
//│ |1| |+| |1|
//│ Parsed: ((+ 1) 1)

f 1 + 1
//│ |f| |1| |+| |1|
//│ Parsed: (f (((+ 1) 1),))

1 2 3
//│ |1| |2| |3|
//│ Parsed: (1 ((2 (3,)),))

12  3
//│ |12| |3|
//│ Parsed: (12 (3,))

3 + 2 4 - 1
//│ |3| |+| |2| |4| |-| |1|
//│ Parsed: ((+ 3) (2 (((- 4) 1),)))

foo bar
  baz 1
  2 3
//│ |foo| |bar|→|baz| |1|↵|2| |3|
//│ Parsed: (foo ((bar ((baz (1,)); (2 (3,));,)),))

foo bar
  baz 1
    2 3
  4 v5
//│ |foo| |bar|→|baz| |1|→|2| |3|←|↵|4| |v5|
//│ Parsed: (foo ((bar ((baz ((1 ((2 (3,));,)),)); (4 (v5,));,)),))

foo
  1
//│ |foo|→|1|
//│ Parsed: (foo (1;,))

  
//│ | |
//│ ╔══[ERROR] Unexpected space token in expression position
//│ ║  l.50: 	  
//│ ╙──      	^^
//│ Parsed: ()

  1
//│ | |1|
//│ ╔══[ERROR] Unexpected space token in expression position
//│ ║  l.57: 	  1
//│ ╙──      	^^
//│ Parsed: 1

  
  1
//│ | |→|1|
//│ ╔══[ERROR] Unexpected space token in expression position
//│ ║  l.64: 	  
//│ ╙──      	^^
//│ Parsed: 1;

(1)
//│ |(|1|)|
//│ Parsed: {1}

(1
//│ |(|1|
//│ ╔══[ERROR] Expected closing parenthesis token; found end of input instead
//│ ║  l.76: 	(1
//│ ║        	  
//│ ╟── Note: unmatched parenthesis was opened here:
//│ ║  l.76: 	(1
//│ ╙──      	^
//│ Parsed: {1}

(1))
//│ |(|1|)|)|
//│ ╔══[ERROR] Expected end of input; found closing parenthesis token instead
//│ ║  l.86: 	(1))
//│ ╙──      	   ^
//│ Parsed: {1}

(
//│ |(|
//│ ╔══[ERROR] Expected closing parenthesis token; found end of input instead
//│ ║  l.93: 	(
//│ ║        	 
//│ ╟── Note: unmatched parenthesis was opened here:
//│ ║  l.93: 	(
//│ ╙──      	^
//│ Parsed: {()}

)
//│ |)|
//│ ╔══[ERROR] Unexpected closing parenthesis token in expression position
//│ ║  l.103: 	)
//│ ╙──       	^
//│ Parsed: ()

1+
//│ |1|+|
//│ Parsed: ((+ 1) ())

*
//│ |*|
//│ ╔══[ERROR] Unexpected operator token in expression position
//│ ║  l.114: 	*
//│ ╙──       	^
//│ Parsed: ()


f 1, 2, 3
//│ |f| |1|,| |2|,| |3|
//│ Parsed: (f (1, 2, 3,))

f 1,, 2
//│ |f| |1|,|,| |2|
//│ ╔══[ERROR] Unexpected comma token in expression position
//│ ║  l.126: 	f 1,, 2
//│ ╙──       	    ^
//│ Parsed: (f (1, 2,))


f x: 1
//│ |f| |x|:| |1|
//│ Parsed: (f (x: 1,))

f x: 1,
//│ |f| |x|:| |1|,|
//│ Parsed: (f (x: 1, (),))

f x : 1
//│ |f| |x| |:| |1|
//│ Parsed: (f (((: x) 1),))

f x: 1, y: 2
//│ |f| |x|:| |1|,| |y|:| |2|
//│ Parsed: (f (x: 1, y: 2,))

f x : 1, y: 2
//│ |f| |x| |:| |1|,| |y|:| |2|
//│ Parsed: (f (((: x) 1), y: 2,))

f x: 1, y: 2, z: 3
//│ |f| |x|:| |1|,| |y|:| |2|,| |z|:| |3|
//│ Parsed: (f (x: 1, y: 2, z: 3,))

f x: 1, y: g 2, z: 3
//│ |f| |x|:| |1|,| |y|:| |g| |2|,| |z|:| |3|
//│ Parsed: (f (x: 1, y: (g (2, z: 3,)),))

f  x: 1,  y:  g  2, z: 3
//│ |f| |x|:| |1|,| |y|:| |g| |2|,| |z|:| |3|
//│ Parsed: (f (x: 1, y: (g (2, z: 3,)),))

f of x: 1, y: g of 2, z: 3
//│ |f| |of| |x|:| |1|,| |y|:| |g| |of| |2|,| |z|:| |3|
//│ Parsed: (f ((of (x: 1, y: (g ((of (2, z: 3,)),)),)),))

f x: 1 + 1, y: 2 2, z: 3 + 2 4 - 1
//│ |f| |x|:| |1| |+| |1|,| |y|:| |2| |2|,| |z|:| |3| |+| |2| |4| |-| |1|
//│ Parsed: (f (x: ((+ 1) 1), y: (2 (2, z: ((+ 3) (2 (((- 4) 1),))),)),))


x.y
//│ |x|.|y|
//│ Parsed: ((. x) y)

.y
//│ |.|y|
//│ ╔══[ERROR] Unexpected operator token in expression position
//│ ║  l.179: 	.y
//│ ╙──       	^
//│ Parsed: y

acc
+ 1
//│ |acc|↵|+| |1|
//│ Parsed: ((+ acc) 1)

acc
  + 1
//│ |acc|→|+| |1|
//│ Parsed: ((+ acc) 1)

acc
  + 1
  + 2
  * 3
//│ |acc|→|+| |1|↵|+| |2|↵|*| |3|
//│ Parsed: ((+ ((+ acc) 1)) ((* 2) 3))

acc + 1 + 2 * 3
//│ |acc| |+| |1| |+| |2| |*| |3|
//│ Parsed: ((+ ((+ acc) 1)) ((* 2) 3))

acc+1+2*3
//│ |acc|+|1|+|2|*|3|
//│ Parsed: ((+ ((+ acc) 1)) ((* 2) 3))


