:AllowParseErrors
:AllowTypeErrors // TODO rm

1
//│ |1|
//│ Parsed: {1}

f 1
//│ |f| |1|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.8: 	f 1
//│ ╙──     	^^^
//│ Parsed: {f (1,)}

f(1)
//│ |f|(|1|)|
//│ Parsed: {f (1,)}

f (1)
//│ |f| |(|1|)|
//│ Parsed: {f (1,)}

f of 1
//│ |f| |#of| |1|
//│ Parsed: {f (1,)}

1 + 1
//│ |1| |+| |1|
//│ Parsed: {+ 1 1}

f 1 + 1
//│ |f| |1| |+| |1|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.31: 	f 1 + 1
//│ ╙──      	^^^^^^^
//│ Parsed: {f (+ 1 1,)}

f(1 + 1)
//│ |f|(|1| |+| |1|)|
//│ Parsed: {f (+ 1 1,)}

f of 1 + 1
//│ |f| |#of| |1| |+| |1|
//│ Parsed: {f (+ 1 1,)}

f(1) + 1
//│ |f|(|1|)| |+| |1|
//│ Parsed: {+ (f (1,)) 1}

1 2 3
//│ |1| |2| |3|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.50: 	1 2 3
//│ ╙──      	  ^^^
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.50: 	1 2 3
//│ ╙──      	^^^^^
//│ Parsed: {1 (2 (3,),)}

12  3
//│ |12| |3|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.60: 	12  3
//│ ╙──      	^^^^^
//│ Parsed: {12 (3,)}

3 + 2 4 - 1
//│ |3| |+| |2| |4| |-| |1|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.67: 	3 + 2 4 - 1
//│ ╙──      	    ^^^^^^^
//│ Parsed: {+ 3 (2 (- 4 1,))}

foo bar
  baz 1
  2 3
//│ |foo| |bar|→|baz| |1|↵|2| |3|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.74: 	foo bar
//│ ╙──      	^^^^^^^
//│ ╔══[ERROR] Expected end of input; found indentation instead
//│ ║  l.75: 	  baz 1
//│ ╙──      	^^
//│ Parsed: {foo (bar,)}

foo bar
  baz 1
    2 3
  4 v5
//│ |foo| |bar|→|baz| |1|→|2| |3|←|↵|4| |v5|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.86: 	foo bar
//│ ╙──      	^^^^^^^
//│ ╔══[ERROR] Expected end of input; found indentation instead
//│ ║  l.87: 	  baz 1
//│ ╙──      	^^
//│ Parsed: {foo (bar,)}

foo of bar of
  baz of 1 of
    2 of 3
  4 of v5
//│ |foo| |#of| |bar| |#of|→|baz| |#of| |1| |#of|→|2| |#of| |3|←|↵|4| |#of| |v5|
//│ Parsed: {foo (bar ({baz (1 ({2 (3,)},),); 4 (v5,)},),)}

foo
  1
//│ |foo|→|1|
//│ ╔══[ERROR] Expected end of input; found indentation instead
//│ ║  l.107: 	  1
//│ ╙──       	^^
//│ Parsed: {foo}

foo of
  1
//│ |foo| |#of|→|1|
//│ Parsed: {foo ({1},)}

  
//│ | |
//│ ╔══[ERROR] Unexpected space in expression position
//│ ║  l.119: 	  
//│ ╙──       	^^
//│ ╔══[ERROR] Unexpected end of input; an expression was expected here
//│ ║  l.119: 	  
//│ ╙──       	  
//│ Parsed: {undefined}

  1
//│ | |1|
//│ ╔══[ERROR] Unexpected space in expression position
//│ ║  l.129: 	  1
//│ ╙──       	^^
//│ Parsed: {1}

  
  1
//│ | |→|1|
//│ ╔══[ERROR] Unexpected space in expression position
//│ ║  l.136: 	  
//│ ╙──       	^^
//│ Parsed: {{1}}

(1)
//│ |(|1|)|
//│ Parsed: {'(' 1, ')'}

(1
//│ |(|1|
//│ ╔══[ERROR] Expected closing parenthesis; found end of input instead
//│ ║  l.148: 	(1
//│ ║         	  
//│ ╟── Note: unmatched parenthesis was opened here:
//│ ║  l.148: 	(1
//│ ╙──       	^
//│ Parsed: {'(' 1, ')'}

(1))
//│ |(|1|)|)|
//│ ╔══[ERROR] Expected end of input; found closing parenthesis instead
//│ ║  l.158: 	(1))
//│ ╙──       	   ^
//│ Parsed: {'(' 1, ')'}

(
//│ |(|
//│ ╔══[ERROR] Unexpected end of input; an expression was expected here
//│ ║  l.165: 	(
//│ ╙──       	 
//│ ╔══[ERROR] Expected closing parenthesis; found end of input instead
//│ ║  l.165: 	(
//│ ║         	 
//│ ╟── Note: unmatched parenthesis was opened here:
//│ ║  l.165: 	(
//│ ╙──       	^
//│ Parsed: {'(' undefined, ')'}

)
//│ |)|
//│ ╔══[ERROR] Expected end of input; found closing parenthesis instead
//│ ║  l.178: 	)
//│ ╙──       	^
//│ Parsed: {undefined}

1+
//│ |1|+|
//│ ╔══[ERROR] Unexpected end of input; an expression was expected here
//│ ║  l.185: 	1+
//│ ╙──       	  
//│ Parsed: {+ 1 undefined}

*
//│ |*|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.192: 	*
//│ ╙──       	^
//│ ╔══[ERROR] Unexpected end of input; an expression was expected here
//│ ║  l.192: 	*
//│ ╙──       	 
//│ Parsed: {undefined}


f 1
//│ |f| |1|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.203: 	f 1
//│ ╙──       	^^^
//│ Parsed: {f (1,)}

f(1)
//│ |f|(|1|)|
//│ Parsed: {f (1,)}

f (1)
//│ |f| |(|1|)|
//│ Parsed: {f (1,)}


f 1, 2, 3
//│ |f| |1|,| |2|,| |3|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.219: 	f 1, 2, 3
//│ ╙──       	^^^^^^^^^
//│ Parsed: {f (1, 2, 3,)}

f (1, 2, 3)
//│ |f| |(|1|,| |2|,| |3|)|
//│ Parsed: {f (1, 2, 3,)}

f(1, 2, 3)
//│ |f|(|1|,| |2|,| |3|)|
//│ Parsed: {f (1, 2, 3,)}

f[]
//│ |f|[|]|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.234: 	f[]
//│ ╙──       	^^^
//│ Parsed: {f ('(' undefined, ')',)}

f[1]
//│ |f|[|1|]|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.241: 	f[1]
//│ ╙──       	^^^^
//│ Parsed: {f ('(' 1, ')',)}

f[1, 2, 3]
//│ |f|[|1|,| |2|,| |3|]|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.248: 	f[1, 2, 3]
//│ ╙──       	^^^^^^^^^^
//│ Parsed: {f ('(' 1, 2, 3, ')',)}

f{}
//│ |f|{|}|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.255: 	f{}
//│ ╙──       	^^^
//│ Parsed: {f ('{' undefined, '}',)}

f{1}
//│ |f|{|1|}|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.262: 	f{1}
//│ ╙──       	^^^^
//│ Parsed: {f ('{' 1, '}',)}

f{1, 2, 3}
//│ |f|{|1|,| |2|,| |3|}|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.269: 	f{1, 2, 3}
//│ ╙──       	^^^^^^^^^^
//│ Parsed: {f ('{' 1, 2, 3, '}',)}


f 1,, 2
//│ |f| |1|,|,| |2|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.277: 	f 1,, 2
//│ ╙──       	^^^^^^^
//│ Parsed: {f (1, undefined, 2,)}


f of x
//│ |f| |#of| |x|
//│ Parsed: {f (x,)}

f g x
//│ |f| |g| |x|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.289: 	f g x
//│ ╙──       	  ^^^
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.289: 	f g x
//│ ╙──       	^^^^^
//│ Parsed: {f (g (x,),)}

f of g of x
//│ |f| |#of| |g| |#of| |x|
//│ Parsed: {f (g (x,),)}

f of of g
//│ |f| |#of| |#of| |g|
//│ ╔══[ERROR] Unexpected 'of' keyword in expression position
//│ ║  l.303: 	f of of g
//│ ╙──       	     ^^
//│ Parsed: {f (g,)}


f x: 1
//│ |f| |x|#:| |1|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.311: 	f x: 1
//│ ╙──       	^^^^^^
//│ Parsed: {f (x: 1,)}

f x: 1,
//│ |f| |x|#:| |1|,|
//│ ╔══[ERROR] Unexpected end of input; an expression was expected here
//│ ║  l.318: 	f x: 1,
//│ ╙──       	       
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.318: 	f x: 1,
//│ ╙──       	^^^^^^^
//│ Parsed: {f (x: 1, undefined,)}

f x : 1
//│ |f| |x| |#:| |1|
//│ ╔══[ERROR] Unexpected ':' keyword in expression position
//│ ║  l.328: 	f x : 1
//│ ╙──       	    ^
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.328: 	f x : 1
//│ ╙──       	  ^^^^^
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.328: 	f x : 1
//│ ╙──       	^^^^^^^
//│ Parsed: {f (x (1,),)}

f x: 1, y: 2
//│ |f| |x|#:| |1|,| |y|#:| |2|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.341: 	f x: 1, y: 2
//│ ╙──       	^^^^^^^^^^^^
//│ Parsed: {f (x: 1, y: 2,)}

f x : 1, y: 2
//│ |f| |x| |#:| |1|,| |y|#:| |2|
//│ ╔══[ERROR] Unexpected ':' keyword in expression position
//│ ║  l.348: 	f x : 1, y: 2
//│ ╙──       	    ^
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.348: 	f x : 1, y: 2
//│ ╙──       	  ^^^^^^^^^^^
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.348: 	f x : 1, y: 2
//│ ╙──       	^^^^^^^^^^^^^
//│ Parsed: {f (x (1, y: 2,),)}

f x: 1, y: 2, z: 3
//│ |f| |x|#:| |1|,| |y|#:| |2|,| |z|#:| |3|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.361: 	f x: 1, y: 2, z: 3
//│ ╙──       	^^^^^^^^^^^^^^^^^^
//│ Parsed: {f (x: 1, y: 2, z: 3,)}

f x: 1, y: g 2, z: 3
//│ |f| |x|#:| |1|,| |y|#:| |g| |2|,| |z|#:| |3|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.368: 	f x: 1, y: g 2, z: 3
//│ ╙──       	           ^^^^^^^^^
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.368: 	f x: 1, y: g 2, z: 3
//│ ╙──       	^^^^^^^^^^^^^^^^^^^^
//│ Parsed: {f (x: 1, y: g (2, z: 3,),)}

f(x: 1, y: g(2, z: 3))
//│ |f|(|x|#:| |1|,| |y|#:| |g|(|2|,| |z|#:| |3|)|)|
//│ Parsed: {f (x: 1, y: g (2, z: 3,),)}

f(x: 1, y: g(2), z: 3)
//│ |f|(|x|#:| |1|,| |y|#:| |g|(|2|)|,| |z|#:| |3|)|
//│ Parsed: {f (x: 1, y: g (2,), z: 3,)}

f  x: 1,  y:  g  2, z: 3
//│ |f| |x|#:| |1|,| |y|#:| |g| |2|,| |z|#:| |3|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.386: 	f  x: 1,  y:  g  2, z: 3
//│ ╙──       	              ^^^^^^^^^^
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.386: 	f  x: 1,  y:  g  2, z: 3
//│ ╙──       	^^^^^^^^^^^^^^^^^^^^^^^^
//│ Parsed: {f (x: 1, y: g (2, z: 3,),)}

f of x: 1, y: g of 2, z: 3
//│ |f| |#of| |x|#:| |1|,| |y|#:| |g| |#of| |2|,| |z|#:| |3|
//│ Parsed: {f (x: 1, y: g (2, z: 3,),)}

f x: 1 + 1, y: 2 2, z: 3 + 2 4 - 1
//│ |f| |x|#:| |1| |+| |1|,| |y|#:| |2| |2|,| |z|#:| |3| |+| |2| |4| |-| |1|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.400: 	f x: 1 + 1, y: 2 2, z: 3 + 2 4 - 1
//│ ╙──       	                           ^^^^^^^
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.400: 	f x: 1 + 1, y: 2 2, z: 3 + 2 4 - 1
//│ ╙──       	               ^^^^^^^^^^^^^^^^^^^
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.400: 	f x: 1 + 1, y: 2 2, z: 3 + 2 4 - 1
//│ ╙──       	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//│ Parsed: {f (x: + 1 1, y: 2 (2, z: + 3 (2 (- 4 1,)),),)}


x.y
//│ |x|.|y|
//│ Parsed: {. x y}

.y
//│ |.|y|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.418: 	.y
//│ ╙──       	^
//│ Parsed: {y}

acc + 1
//│ |acc| |+| |1|
//│ Parsed: {+ acc 1}

acc
+ 1
//│ |acc|↵|+| |1|
//│ Parsed: {+ acc 1}

acc
  + 1
//│ |acc|→|+| |1|
//│ Parsed: {+ acc 1}

acc +
  1
//│ |acc| |+|→|1|
//│ Parsed: {+ acc {1}}

acc
  +
  1
//│ |acc|→|+|↵|1|
//│ ╔══[ERROR] Unexpected newline in expression position
//│ ║  l.445: 	  +
//│ ║         	   
//│ ║  l.446: 	  1
//│ ╙──       	^^
//│ Parsed: {+ acc 1}

acc
  +
    1
//│ |acc|→|+|→|1|
//│ Parsed: {+ acc {1}}

acc
  + 1
  + 2
  * 3
//│ |acc|→|+| |1|↵|+| |2|↵|*| |3|
//│ Parsed: {+ (+ acc 1) (* 2 3)}

acc + 1 + 2 * 3
//│ |acc| |+| |1| |+| |2| |*| |3|
//│ Parsed: {+ (+ acc 1) (* 2 3)}

acc+1+2*3
//│ |acc|+|1|+|2|*|3|
//│ Parsed: {+ (+ acc 1) (* 2 3)}

acc +
  foo bar
  baz
//│ |acc| |+|→|foo| |bar|↵|baz|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.477: 	  foo bar
//│ ╙──       	  ^^^^^^^
//│ Parsed: {+ acc {foo (bar,); baz}}

a+
  b
  c
//│ |a|+|→|b|↵|c|
//│ Parsed: {+ a {b; c}}

a+
  b
c
//│ |a|+|→|b|←|↵|c|
//│ Parsed: {+ a {b}; c}

a
  +b
c
//│ |a|→|+|b|←|↵|c|
//│ Parsed: {+ a b; c}


a + b
  * 2
//│ |a| |+| |b|→|*| |2|
//│ Parsed: {+ a (* b 2)}

a + b
  * 2
  + 1
  * 3
//│ |a| |+| |b|→|*| |2|↵|+| |1|↵|*| |3|
//│ Parsed: {+ (+ a (* b 2)) (* 1 3)}

a + b
  * 2
    + 1
//│ |a| |+| |b|→|*| |2|→|+| |1|
//│ ╔══[ERROR] Expected end of indented block; found indentation instead
//│ ║  l.518: 	    + 1
//│ ╙──       	^^^^
//│ Parsed: {+ (+ a (* b 2)) 1}

a + b
  * 2
    + 1
  * 3
//│ |a| |+| |b|→|*| |2|→|+| |1|←|↵|*| |3|
//│ ╔══[ERROR] Expected end of indented block; found indentation instead
//│ ║  l.527: 	    + 1
//│ ╙──       	^^^^
//│ Parsed: {* (+ (+ a (* b 2)) 1) 3}

a +
  b
    * 2
  + 1
  * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|↵|*| |3|
//│ Parsed: {+ a {+ (* b 2) (* 1 3)}}

a +
    b
      * 2
    + 1
  * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|←|→|*| |3|
//│ Parsed: {* (+ a {+ (* b 2) 1}) 3}

a +
  b
    * 2
  +
    1
      * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+|→|1|→|*| |3|
//│ Parsed: {+ a {+ (* b 2) {* 1 3}}}

a +
  b
    * 2
  + 1
    * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|→|*| |3|
//│ Parsed: {+ a {+ (* b 2) (* 1 3)}}


a then b
//│ |a| |#then| |b|
//│ ╔══[ERROR] Unexpected 'then'/'else' clause
//│ ║  l.569: 	a then b
//│ ╙──       	^^^^^^^^
//│ Parsed: {undefined}




