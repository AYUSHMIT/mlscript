:AllowParseErrors
:AllowTypeErrors // TODO rm


acc + 1
//│ |acc| |+| |1|
//│ Parsed: {+ acc 1}

acc
+ 1
//│ |acc|↵|+| |1|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.10: 	+ 1
//│ ╙──      	^
//│ Parsed: {acc; 1}

acc
  + 1
//│ |acc|→|+| |1|
//│ Parsed: {+ acc 1}

acc +
  1
//│ |acc| |+|→|1|
//│ Parsed: {+ acc {1}}

acc
  +
  1
//│ |acc|→|+|↵|1|
//│ ╔══[ERROR] Unexpected newline in expression position
//│ ║  l.28: 	  +
//│ ║        	   ^
//│ ║  l.29: 	  1
//│ ╙──      	^^
//│ Parsed: {+ acc 1}

acc
  +
    1
//│ |acc|→|+|→|1|
//│ Parsed: {+ acc {1}}

acc
  + 1
  * 3
//│ |acc|→|+| |1|↵|*| |3|
//│ Parsed: {* (+ acc 1) 3}

acc
  + 1
  + 2
  * 3
//│ |acc|→|+| |1|↵|+| |2|↵|*| |3|
//│ Parsed: {* (+ (+ acc 1) 2) 3}

acc + 1 + 2 * 3
//│ |acc| |+| |1| |+| |2| |*| |3|
//│ Parsed: {+ (+ acc 1) (* 2 3)}

acc+1+2*3
//│ |acc|+|1|+|2|*|3|
//│ Parsed: {+ (+ acc 1) (* 2 3)}

acc +
  foo bar
  baz
//│ |acc| |+|→|foo| |bar|↵|baz|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.66: 	  foo bar
//│ ╙──      	  ^^^^^^^
//│ Parsed: {+ acc {foo (bar,); baz}}

a+
  b
  c
//│ |a|+|→|b|↵|c|
//│ Parsed: {+ a {b; c}}

a+
  b
c
//│ |a|+|→|b|←|↵|c|
//│ Parsed: {+ a {b}; c}

a
  +b
c
//│ |a|→|+|b|←|↵|c|
//│ Parsed: {+ a b; c}


a + b
  * 2
//│ |a| |+| |b|→|*| |2|
//│ Parsed: {* (+ a b) 2}

a + b
  * 2
  + 1
  * 3
//│ |a| |+| |b|→|*| |2|↵|+| |1|↵|*| |3|
//│ Parsed: {* (+ (* (+ a b) 2) 1) 3}

a + b
  * 2
    + 1
//│ |a| |+| |b|→|*| |2|→|+| |1|
//│ Parsed: {* (+ a b) (+ 2 1)}

// TODO?
a + b
    * 2
  + 1
//│ |a| |+| |b|→|*| |2|←|→|+| |1|
//│ ╔══[ERROR] Expected end of input; found indentation instead
//│ ║  l.114: 	  + 1
//│ ╙──       	^^
//│ Parsed: {* (+ a b) 2}

a + b
  * 2
    + 1
  * 3
//│ |a| |+| |b|→|*| |2|→|+| |1|←|↵|*| |3|
//│ Parsed: {* (* (+ a b) (+ 2 1)) 3}

a +
  b
    * 2
  + 1
  * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|↵|*| |3|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.131: 	  + 1
//│ ╙──       	  ^
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.132: 	  * 3
//│ ╙──       	  ^
//│ Parsed: {+ a {* b 2; 1; 3}}

a +
    b
      * 2
    + 1
  * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|←|→|*| |3|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.145: 	    + 1
//│ ╙──       	    ^
//│ Parsed: {* (+ a {* b 2; 1}) 3}

a +
  b
    * 2
  +
    1
      * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+|→|1|→|*| |3|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.156: 	  +
//│ ╙──       	  ^
//│ Parsed: {+ a {* b 2; {* 1 3}}}

a +
  b
    * 2
    +
      1
        * 3
//│ |a| |+|→|b|→|*| |2|↵|+|→|1|→|*| |3|
//│ Parsed: {+ a {+ (* b 2) {* 1 3}}}

a +
  b
    * 2
  + 1
    * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|→|*| |3|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.177: 	  + 1
//│ ╙──       	  ^
//│ Parsed: {+ a {* b 2; * 1 3}}

a +
  b
    * 2
    + 1
      * 3
//│ |a| |+|→|b|→|*| |2|↵|+| |1|→|*| |3|
//│ Parsed: {+ a {+ (* b 2) (* 1 3)}}


