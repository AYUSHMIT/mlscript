:NewDefs
:NoJS

// TODO support identifier unquotes without braces:
:pe
:e
let x = code"1"
code"$x + 1"
//│ ╔══[LEXICAL ERROR] unexpected character '$'
//│ ║  l.8: 	code"$x + 1"
//│ ╙──     	     ^
//│ ╔══[PARSE ERROR] Unexpected error in expression position
//│ ║  l.8: 	code"$x + 1"
//│ ╙──     	     ^
//│ ╔══[ERROR] Type mismatch in operator application:
//│ ║  l.8: 	code"$x + 1"
//│ ║       	      ^^^^^
//│ ╟── reference of type `Code[1, nothing]` is not an instance of `Int`
//│ ║  l.8: 	code"$x + 1"
//│ ╙──     	      ^
//│ let x: Code[1, nothing]
//│ Code[Int | error, nothing]


// TODO support a more lightweight alternative quotation syntax, such as:
// '123 %> x =>
// '{$x + 1} %> y =>
// '{$y + $y}


