:NoJS


def foo f x =
  if true then f x
  else f (id x)
//│ foo: ('a -> 'b) -> 'a -> 'b

def foo k f x =
  if true then f x
  else f (k x)
//│ foo: ('a -> 'b) -> ('b -> 'c & 'a -> 'c) -> 'a -> 'c

// * TODO simplify
foo id
//│ res: ('a -> 'b & 'c -> 'b) -> ('a & 'c) -> 'b


def f: ('a -> 'b & 'c -> 'b & 'a -> 'c) -> 'a -> 'b
//│ f: ('a -> 'c & 'a -> 'b & 'c -> 'b) -> 'a -> 'b


