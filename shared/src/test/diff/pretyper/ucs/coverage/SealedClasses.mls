:PreTyper

abstract class Term: Abs | App | Var
class Var(name: Str) extends Term
class Abs(param: Str, body: Term) extends Term
class App(func: Term, arg: Term) extends Term
//│ abstract class Term: Abs | App | Var
//│ class Var(name: Str) extends Term
//│ class Abs(param: Str, body: Term) extends Term
//│ class App(func: Term, arg: Term) extends Term

// TODO: Why doesn't `Term` match `Abs | App | Var`?
fun is_value(term) =
  if term is Term and term is
    Abs(_, _) then true
    Var(_) then false
    App(_, _) then false
//│ ╔══[ERROR] Type mismatch in `case` expression:
//│ ║  l.14: 	  if term is Term and term is
//│ ║        	                      ^^^^^^^
//│ ║  l.15: 	    Abs(_, _) then true
//│ ║        	^^^^^^^^^^^^^^^^^^^^^^^
//│ ║  l.16: 	    Var(_) then false
//│ ║        	^^^^^^^^^^^^^^^^^^^^^
//│ ║  l.17: 	    App(_, _) then false
//│ ║        	^^^^^^^^^^^^^^^^^^^^^^^^
//│ ╟── class pattern of type `Term` does not match type `Abs | App | Var`
//│ ║  l.14: 	  if term is Term and term is
//│ ║        	             ^^^^
//│ ╟── but it flows into reference with expected type `Abs | App | Var`
//│ ║  l.14: 	  if term is Term and term is
//│ ╙──      	                      ^^^^
//│ fun is_value: Term -> Bool

:e
fun is_value'(term) =
  if term is Term and term is
    Abs(_, _) then true
    Var(_) then false
//│ ╔══[ERROR] When scrutinee `term` is `Term`
//│ ║  l.37: 	  if term is Term and term is
//│ ║        	             ^^^^
//│ ╟── Scrutinee `term` has 1 missing case
//│ ║  l.36: 	fun is_value'(term) =
//│ ║        	              ^^^^
//│ ╟── It can be class `App`
//│ ║  l.6: 	class App(func: Term, arg: Term) extends Term
//│ ╙──     	      ^^^
//│ ╔══[ERROR] Type mismatch in `case` expression:
//│ ║  l.37: 	  if term is Term and term is
//│ ║        	                      ^^^^^^^
//│ ║  l.38: 	    Abs(_, _) then true
//│ ║        	^^^^^^^^^^^^^^^^^^^^^^^
//│ ║  l.39: 	    Var(_) then false
//│ ║        	^^^^^^^^^^^^^^^^^^^^^
//│ ╟── class pattern of type `Term` does not match type `Abs | Var`
//│ ║  l.37: 	  if term is Term and term is
//│ ║        	             ^^^^
//│ ╟── but it flows into reference with expected type `Abs | Var`
//│ ║  l.37: 	  if term is Term and term is
//│ ╙──      	                      ^^^^
//│ fun is_value': Term -> Bool
