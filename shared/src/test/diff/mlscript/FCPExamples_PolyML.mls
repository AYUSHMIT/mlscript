:GeneralizeCurriedFunctions

// ============ Sec 1.1 ============

// i.e. auto
g = fun (f: forall 'a. 'a -> 'a) -> f f
g' = fun f -> f f
//│ g: (forall 'a. 'a -> 'a) -> (forall 'a. 'a -> 'a)
//│  = [Function: g]
//│ g': ('a -> 'b & 'a) -> 'b
//│   = [Function: g]

// i.e. auto id (FreezeML F5)
(fun (f: forall 'a. 'a -> 'a) -> f f) (fun x -> x)
(fun f -> f f) (fun x -> x)
//│ res: 'a -> 'a
//│    = [Function (anonymous)]
//│ res: 'a -> 'a
//│    = [Function (anonymous)]

// i.e. (fun auto -> auto id) auto
(fun g -> g (fun x -> x)) (fun f -> f f)
(fun g -> g (fun x -> x)) (fun (f: forall 'a. 'a -> 'a) -> f f)
//│ res: 'a -> 'a
//│    = [Function (anonymous)]
//│ res: 'a -> 'a
//│    = [Function (anonymous)]

// ============ Sec 1.2 ============

fun f -> f (g f)
fun f -> f (g' f)
//│ res: ((forall 'a. 'a -> 'a) -> 'b & 'a -> 'a) -> 'b
//│    = [Function: res]
//│ res: ('a -> 'b & 'c -> 'a & 'c) -> 'b
//│    = [Function: res]

// ============ Sec 4.1 ============

let f = fun x -> x in 
  let g = (fun x -> x) f in
    g g
//│ res: 'a -> 'a
//│    = [Function (anonymous)]

:NoJS

// ============ Sec 4.2 ============
// using FCP to solve method typing issues,
// which is overkill since it can be solved with subtyping and two levels of polymorphism...
// all of the following are typable in the main branch

// ------------ Dummy classes to represent the types in the examples ------------

class List[a]
  method Get: a
//│ Defined class List[+a]
//│ Declared List.Get: List['a] -> 'a

// Used to represent `::` in the papers
def cons[a]: a -> List[a] -> List[a]
//│ cons: 'a -> List['a] -> List['a]

// Used to represent `[]` in the papers
def nil: List['a]
//│ nil: List[nothing]

def match_list: forall 'a 'b. List['a] -> 'b -> ('a -> List['a] -> 'b) -> 'b
//│ match_list: List['a] -> 'b -> ('a -> List['a] -> 'b) -> 'b

// ------------ Type signatures for functions used in the examples ------------
// (I guess)

def mem[a]: a -> List[a] -> bool
rec def mem x l = match_list l false (fun head -> fun tail -> if eq head x then true else mem x tail)
//│ mem: anything -> List[?] -> bool
//│ 'b -> (forall 'b, 'a, 'c. (List['a] -> (false | true | 'c)
//│   where
//│     'mem <: 'b -> List['a] -> 'c)) | 'mem
//│   <:  mem:
//│ anything -> List[?] -> bool
//│ ╔══[ERROR] Subtyping constraint of the form `forall ?c, ?d, ?e, ?f, ?g, ?h, ?i, ?j, ?k, ?l, ?m, ?n, ?o, ?p, ?q, ?r, ?s, ?t, ?u, ?v, ?w, ?x, ?y, ?z, ?a1, ?b1, ?c1, ?d1, ?e1, ?f1, ?g1, ?h1, ?mem, ?i1, ?j1, ?k1, ?a, ?l1, ?m1, ?n1, ?b, ?o1, ?p1, ?q1, ?r1, ?a0, ?s1, ?t1, ?u1, ?b0, ?v1, ?w1, ?x1, ?y1, ?a1, ?z1, ?a2, ?b2, ?b1, ?c2, ?d2, ?e2, ?f2, ?a2, ?g2, ?h2, ?i2, ?b2, ?j2, ?k2, ?l2, ?m2, ?a3, ?n2, ?o2, ?p2, ?b3, ?q2, ?r2, ?s2, ?t2, ?a4, ?u2, ?v2, ?w2, ?b4, ?x2, ?y2, ?z2, ?a3, ?a5, ?b3, ?c3, ?d3, ?b5, ?e3, ?f3, ?g3, ?h3, ?a6, ?i3, ?j3, ?k3, ?b6, ?l3, ?m3, ?n3, ?o3, ?a7, ?p3, ?q3, ?r3, ?b7, ?s3, ?t3, ?u3, ?v3, ?a8, ?w3, ?x3, ?y3, ?b8, ?z3, ?a4, ?b4, ?c4, ?a9, ?d4, ?e4, ?f4, ?b9, ?g4, ?h4, ?i4, ?j4, ?a10, ?k4, ?l4, ?m4, ?b10, ?n4, ?o4, ?p4, ?q4, ?a11, ?r4, ?s4, ?t4, ?b11, ?u4, ?v4, ?w4, ?x4, ?a12, ?y4, ?z4, ?a5, ?b12, ?b5, ?c5, ?d5, ?e5, ?a13, ?f5, ?g5, ?h5, ?b13, ?i5, ?j5, ?k5, ?l5, ?a14, ?m5, ?n5, ?o5, ?b14, ?p5, ?q5, ?r5, ?s5, ?a15, ?t5, ?u5, ?v5, ?b15, ?w5, ?x5, ?y5, ?z5, ?a16, ?a6, ?b6, ?c6, ?b16, ?d6, ?e6, ?f6, ?g6, ?a17, ?h6, ?i6, ?j6, ?b17, ?k6, ?l6, ?m6, ?n6, ?a18, ?o6, ?p6, ?q6, ?b18, ?r6, ?s6, ?t6, ?u6, ?a19, ?v6, ?w6, ?x6, ?b19, ?y6, ?z6, ?a7, ?b7, ?a20, ?c7, ?d7, ?e7, ?b20, ?f7, ?g7, ?h7, ?i7, ?a21, ?j7, ?k7, ?l7, ?b21, ?m7, ?n7, ?o7, ?p7, ?a22, ?q7, ?r7, ?s7, ?b22, ?t7, ?u7, ?v7, ?w7, ?a23, ?x7, ?y7, ?z7, ?b23, ?a8, ?b8, ?c8, ?d8, ?a24, ?e8, ?f8, ?g8, ?b24, ?h8, ?i8, ?j8, ?k8, ?a25, ?l8, ?m8, ?n8, ?b25, ?o8, ?p8, ?q8, ?r8, ?a26, ?s8, ?t8, ?u8, ?b26, ?v8, ?w8, ?x8, ?y8, ?a27, ?z8, ?a9, ?b9, ?b27, ?c9, ?d9, ?e9, ?f9, ?a28, ?g9, ?h9, ?i9, ?b28, ?j9, ?k9, ?l9, ?m9, ?a29, ?n9, ?o9, ?p9, ?b29, ?q9. ?mem <: forall ?r9. ?r9 -> List[?r9] -> bool` exceeded recursion depth limit (400)
//│ ║  l.75: 	rec def mem x l = match_list l false (fun head -> fun tail -> if eq head x then true else mem x tail)
//│ ║        	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//│ ╟── while constraining:  _α199''  <!<  α852'
//│ ╟── while constraining:  α831'  <!<  α852'
//│ ╟── while constraining:  (α831',)  <!<  (α852',)
//│ ╟── while constraining:  (α852' -> ‹∀ 2. (mem153' <: ((α852',) -> α853''') => (α862''' -> α861'''))›)  <!<  ((α831',) -> α842')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α831',) -> α842')
//│ ╟── while constraining:  mem153'  <!<  ((α831',) -> α842')
//│ ╟── while constraining:  (mem153' <: ((α831',) -> α842') => (α851' -> α850'))  <!<  ((α822',) -> α825')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α831',) -> α832''') => (α841''' -> α840'''))›  <!<  ((α822',) -> α825')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α831',) -> α832''') => (α841''' -> α840'''))›  <!<  α821'
//│ ╟── while constraining:  (α831' -> ‹∀ 2. (mem153' <: ((α831',) -> α832''') => (α841''' -> α840'''))›)  <!<  ((α810',) -> α821')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α810',) -> α821')
//│ ╟── while constraining:  mem153'  <!<  ((α810',) -> α821')
//│ ╟── while constraining:  (mem153' <: ((α810',) -> α821') => (α830' -> α829'))  <!<  ((α801',) -> α804')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α810',) -> α811''') => (α820''' -> α819'''))›  <!<  ((α801',) -> α804')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α810',) -> α811''') => (α820''' -> α819'''))›  <!<  α800'
//│ ╟── while constraining:  (α810' -> ‹∀ 2. (mem153' <: ((α810',) -> α811''') => (α820''' -> α819'''))›)  <!<  ((α789',) -> α800')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α789',) -> α800')
//│ ╟── while constraining:  mem153'  <!<  ((α789',) -> α800')
//│ ╟── while constraining:  (mem153' <: ((α789',) -> α800') => (α809' -> α808'))  <!<  ((α780',) -> α783')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α789',) -> α790''') => (α799''' -> α798'''))›  <!<  ((α780',) -> α783')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α789',) -> α790''') => (α799''' -> α798'''))›  <!<  α779'
//│ ╟── while constraining:  (α789' -> ‹∀ 2. (mem153' <: ((α789',) -> α790''') => (α799''' -> α798'''))›)  <!<  ((α768',) -> α779')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α768',) -> α779')
//│ ╟── while constraining:  mem153'  <!<  ((α768',) -> α779')
//│ ╟── while constraining:  (mem153' <: ((α768',) -> α779') => (α788' -> α787'))  <!<  ((α759',) -> α762')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α768',) -> α769''') => (α778''' -> α777'''))›  <!<  ((α759',) -> α762')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α768',) -> α769''') => (α778''' -> α777'''))›  <!<  α758'
//│ ╟── while constraining:  (α768' -> ‹∀ 2. (mem153' <: ((α768',) -> α769''') => (α778''' -> α777'''))›)  <!<  ((α747',) -> α758')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α747',) -> α758')
//│ ╟── while constraining:  mem153'  <!<  ((α747',) -> α758')
//│ ╟── while constraining:  (mem153' <: ((α747',) -> α758') => (α767' -> α766'))  <!<  ((α738',) -> α741')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α747',) -> α748''') => (α757''' -> α756'''))›  <!<  ((α738',) -> α741')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α747',) -> α748''') => (α757''' -> α756'''))›  <!<  α737'
//│ ╟── while constraining:  (α747' -> ‹∀ 2. (mem153' <: ((α747',) -> α748''') => (α757''' -> α756'''))›)  <!<  ((α726',) -> α737')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α726',) -> α737')
//│ ╟── while constraining:  mem153'  <!<  ((α726',) -> α737')
//│ ╟── while constraining:  (mem153' <: ((α726',) -> α737') => (α746' -> α745'))  <!<  ((α717',) -> α720')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α726',) -> α727''') => (α736''' -> α735'''))›  <!<  ((α717',) -> α720')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α726',) -> α727''') => (α736''' -> α735'''))›  <!<  α716'
//│ ╟── while constraining:  (α726' -> ‹∀ 2. (mem153' <: ((α726',) -> α727''') => (α736''' -> α735'''))›)  <!<  ((α705',) -> α716')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α705',) -> α716')
//│ ╟── while constraining:  mem153'  <!<  ((α705',) -> α716')
//│ ╟── while constraining:  (mem153' <: ((α705',) -> α716') => (α725' -> α724'))  <!<  ((α696',) -> α699')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α705',) -> α706''') => (α715''' -> α714'''))›  <!<  ((α696',) -> α699')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α705',) -> α706''') => (α715''' -> α714'''))›  <!<  α695'
//│ ╟── while constraining:  (α705' -> ‹∀ 2. (mem153' <: ((α705',) -> α706''') => (α715''' -> α714'''))›)  <!<  ((α684',) -> α695')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α684',) -> α695')
//│ ╟── while constraining:  mem153'  <!<  ((α684',) -> α695')
//│ ╟── while constraining:  (mem153' <: ((α684',) -> α695') => (α704' -> α703'))  <!<  ((α675',) -> α678')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α684',) -> α685''') => (α694''' -> α693'''))›  <!<  ((α675',) -> α678')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α684',) -> α685''') => (α694''' -> α693'''))›  <!<  α674'
//│ ╟── while constraining:  (α684' -> ‹∀ 2. (mem153' <: ((α684',) -> α685''') => (α694''' -> α693'''))›)  <!<  ((α663',) -> α674')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α663',) -> α674')
//│ ╟── while constraining:  mem153'  <!<  ((α663',) -> α674')
//│ ╟── while constraining:  (mem153' <: ((α663',) -> α674') => (α683' -> α682'))  <!<  ((α654',) -> α657')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α663',) -> α664''') => (α673''' -> α672'''))›  <!<  ((α654',) -> α657')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α663',) -> α664''') => (α673''' -> α672'''))›  <!<  α653'
//│ ╟── while constraining:  (α663' -> ‹∀ 2. (mem153' <: ((α663',) -> α664''') => (α673''' -> α672'''))›)  <!<  ((α642',) -> α653')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α642',) -> α653')
//│ ╟── while constraining:  mem153'  <!<  ((α642',) -> α653')
//│ ╟── while constraining:  (mem153' <: ((α642',) -> α653') => (α662' -> α661'))  <!<  ((α633',) -> α636')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α642',) -> α643''') => (α652''' -> α651'''))›  <!<  ((α633',) -> α636')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α642',) -> α643''') => (α652''' -> α651'''))›  <!<  α632'
//│ ╟── while constraining:  (α642' -> ‹∀ 2. (mem153' <: ((α642',) -> α643''') => (α652''' -> α651'''))›)  <!<  ((α621',) -> α632')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α621',) -> α632')
//│ ╟── while constraining:  mem153'  <!<  ((α621',) -> α632')
//│ ╟── while constraining:  (mem153' <: ((α621',) -> α632') => (α641' -> α640'))  <!<  ((α612',) -> α615')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α621',) -> α622''') => (α631''' -> α630'''))›  <!<  ((α612',) -> α615')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α621',) -> α622''') => (α631''' -> α630'''))›  <!<  α611'
//│ ╟── while constraining:  (α621' -> ‹∀ 2. (mem153' <: ((α621',) -> α622''') => (α631''' -> α630'''))›)  <!<  ((α600',) -> α611')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α600',) -> α611')
//│ ╟── while constraining:  mem153'  <!<  ((α600',) -> α611')
//│ ╟── while constraining:  (mem153' <: ((α600',) -> α611') => (α620' -> α619'))  <!<  ((α591',) -> α594')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α600',) -> α601''') => (α610''' -> α609'''))›  <!<  ((α591',) -> α594')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α600',) -> α601''') => (α610''' -> α609'''))›  <!<  α590'
//│ ╟── while constraining:  (α600' -> ‹∀ 2. (mem153' <: ((α600',) -> α601''') => (α610''' -> α609'''))›)  <!<  ((α579',) -> α590')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α579',) -> α590')
//│ ╟── while constraining:  mem153'  <!<  ((α579',) -> α590')
//│ ╟── while constraining:  (mem153' <: ((α579',) -> α590') => (α599' -> α598'))  <!<  ((α570',) -> α573')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α579',) -> α580''') => (α589''' -> α588'''))›  <!<  ((α570',) -> α573')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α579',) -> α580''') => (α589''' -> α588'''))›  <!<  α569'
//│ ╟── while constraining:  (α579' -> ‹∀ 2. (mem153' <: ((α579',) -> α580''') => (α589''' -> α588'''))›)  <!<  ((α558',) -> α569')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α558',) -> α569')
//│ ╟── while constraining:  mem153'  <!<  ((α558',) -> α569')
//│ ╟── while constraining:  (mem153' <: ((α558',) -> α569') => (α578' -> α577'))  <!<  ((α549',) -> α552')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α558',) -> α559''') => (α568''' -> α567'''))›  <!<  ((α549',) -> α552')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α558',) -> α559''') => (α568''' -> α567'''))›  <!<  α548'
//│ ╟── while constraining:  (α558' -> ‹∀ 2. (mem153' <: ((α558',) -> α559''') => (α568''' -> α567'''))›)  <!<  ((α537',) -> α548')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α537',) -> α548')
//│ ╟── while constraining:  mem153'  <!<  ((α537',) -> α548')
//│ ╟── while constraining:  (mem153' <: ((α537',) -> α548') => (α557' -> α556'))  <!<  ((α528',) -> α531')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α537',) -> α538''') => (α547''' -> α546'''))›  <!<  ((α528',) -> α531')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α537',) -> α538''') => (α547''' -> α546'''))›  <!<  α527'
//│ ╟── while constraining:  (α537' -> ‹∀ 2. (mem153' <: ((α537',) -> α538''') => (α547''' -> α546'''))›)  <!<  ((α516',) -> α527')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α516',) -> α527')
//│ ╟── while constraining:  mem153'  <!<  ((α516',) -> α527')
//│ ╟── while constraining:  (mem153' <: ((α516',) -> α527') => (α536' -> α535'))  <!<  ((α507',) -> α510')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α516',) -> α517''') => (α526''' -> α525'''))›  <!<  ((α507',) -> α510')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α516',) -> α517''') => (α526''' -> α525'''))›  <!<  α506'
//│ ╟── while constraining:  (α516' -> ‹∀ 2. (mem153' <: ((α516',) -> α517''') => (α526''' -> α525'''))›)  <!<  ((α495',) -> α506')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α495',) -> α506')
//│ ╟── while constraining:  mem153'  <!<  ((α495',) -> α506')
//│ ╟── while constraining:  (mem153' <: ((α495',) -> α506') => (α515' -> α514'))  <!<  ((α486',) -> α489')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α495',) -> α496''') => (α505''' -> α504'''))›  <!<  ((α486',) -> α489')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α495',) -> α496''') => (α505''' -> α504'''))›  <!<  α485'
//│ ╟── while constraining:  (α495' -> ‹∀ 2. (mem153' <: ((α495',) -> α496''') => (α505''' -> α504'''))›)  <!<  ((α474',) -> α485')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α474',) -> α485')
//│ ╟── while constraining:  mem153'  <!<  ((α474',) -> α485')
//│ ╟── while constraining:  (mem153' <: ((α474',) -> α485') => (α494' -> α493'))  <!<  ((α465',) -> α468')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α474',) -> α475''') => (α484''' -> α483'''))›  <!<  ((α465',) -> α468')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α474',) -> α475''') => (α484''' -> α483'''))›  <!<  α464'
//│ ╟── while constraining:  (α474' -> ‹∀ 2. (mem153' <: ((α474',) -> α475''') => (α484''' -> α483'''))›)  <!<  ((α453',) -> α464')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α453',) -> α464')
//│ ╟── while constraining:  mem153'  <!<  ((α453',) -> α464')
//│ ╟── while constraining:  (mem153' <: ((α453',) -> α464') => (α473' -> α472'))  <!<  ((α444',) -> α447')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α453',) -> α454''') => (α463''' -> α462'''))›  <!<  ((α444',) -> α447')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α453',) -> α454''') => (α463''' -> α462'''))›  <!<  α443'
//│ ╟── while constraining:  (α453' -> ‹∀ 2. (mem153' <: ((α453',) -> α454''') => (α463''' -> α462'''))›)  <!<  ((α432',) -> α443')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α432',) -> α443')
//│ ╟── while constraining:  mem153'  <!<  ((α432',) -> α443')
//│ ╟── while constraining:  (mem153' <: ((α432',) -> α443') => (α452' -> α451'))  <!<  ((α423',) -> α426')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α432',) -> α433''') => (α442''' -> α441'''))›  <!<  ((α423',) -> α426')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α432',) -> α433''') => (α442''' -> α441'''))›  <!<  α422'
//│ ╟── while constraining:  (α432' -> ‹∀ 2. (mem153' <: ((α432',) -> α433''') => (α442''' -> α441'''))›)  <!<  ((α411',) -> α422')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α411',) -> α422')
//│ ╟── while constraining:  mem153'  <!<  ((α411',) -> α422')
//│ ╟── while constraining:  (mem153' <: ((α411',) -> α422') => (α431' -> α430'))  <!<  ((α402',) -> α405')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α411',) -> α412''') => (α421''' -> α420'''))›  <!<  ((α402',) -> α405')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α411',) -> α412''') => (α421''' -> α420'''))›  <!<  α401'
//│ ╟── while constraining:  (α411' -> ‹∀ 2. (mem153' <: ((α411',) -> α412''') => (α421''' -> α420'''))›)  <!<  ((α390',) -> α401')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α390',) -> α401')
//│ ╟── while constraining:  mem153'  <!<  ((α390',) -> α401')
//│ ╟── while constraining:  (mem153' <: ((α390',) -> α401') => (α410' -> α409'))  <!<  ((α381',) -> α384')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α390',) -> α391''') => (α400''' -> α399'''))›  <!<  ((α381',) -> α384')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α390',) -> α391''') => (α400''' -> α399'''))›  <!<  α380'
//│ ╟── while constraining:  (α390' -> ‹∀ 2. (mem153' <: ((α390',) -> α391''') => (α400''' -> α399'''))›)  <!<  ((α369',) -> α380')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α369',) -> α380')
//│ ╟── while constraining:  mem153'  <!<  ((α369',) -> α380')
//│ ╟── while constraining:  (mem153' <: ((α369',) -> α380') => (α389' -> α388'))  <!<  ((α360',) -> α363')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α369',) -> α370''') => (α379''' -> α378'''))›  <!<  ((α360',) -> α363')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α369',) -> α370''') => (α379''' -> α378'''))›  <!<  α359'
//│ ╟── while constraining:  (α369' -> ‹∀ 2. (mem153' <: ((α369',) -> α370''') => (α379''' -> α378'''))›)  <!<  ((α348',) -> α359')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α348',) -> α359')
//│ ╟── while constraining:  mem153'  <!<  ((α348',) -> α359')
//│ ╟── while constraining:  (mem153' <: ((α348',) -> α359') => (α368' -> α367'))  <!<  ((α339',) -> α342')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α348',) -> α349''') => (α358''' -> α357'''))›  <!<  ((α339',) -> α342')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α348',) -> α349''') => (α358''' -> α357'''))›  <!<  α338'
//│ ╟── while constraining:  (α348' -> ‹∀ 2. (mem153' <: ((α348',) -> α349''') => (α358''' -> α357'''))›)  <!<  ((α327',) -> α338')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α327',) -> α338')
//│ ╟── while constraining:  mem153'  <!<  ((α327',) -> α338')
//│ ╟── while constraining:  (mem153' <: ((α327',) -> α338') => (α347' -> α346'))  <!<  ((α318',) -> α321')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α327',) -> α328''') => (α337''' -> α336'''))›  <!<  ((α318',) -> α321')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α327',) -> α328''') => (α337''' -> α336'''))›  <!<  α317'
//│ ╟── while constraining:  (α327' -> ‹∀ 2. (mem153' <: ((α327',) -> α328''') => (α337''' -> α336'''))›)  <!<  ((α306',) -> α317')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α306',) -> α317')
//│ ╟── while constraining:  mem153'  <!<  ((α306',) -> α317')
//│ ╟── while constraining:  (mem153' <: ((α306',) -> α317') => (α326' -> α325'))  <!<  ((α297',) -> α300')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α306',) -> α307''') => (α316''' -> α315'''))›  <!<  ((α297',) -> α300')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α306',) -> α307''') => (α316''' -> α315'''))›  <!<  α296'
//│ ╟── while constraining:  (α306' -> ‹∀ 2. (mem153' <: ((α306',) -> α307''') => (α316''' -> α315'''))›)  <!<  ((α285',) -> α296')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α285',) -> α296')
//│ ╟── while constraining:  mem153'  <!<  ((α285',) -> α296')
//│ ╟── while constraining:  (mem153' <: ((α285',) -> α296') => (α305' -> α304'))  <!<  ((α276',) -> α279')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α285',) -> α286''') => (α295''' -> α294'''))›  <!<  ((α276',) -> α279')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α285',) -> α286''') => (α295''' -> α294'''))›  <!<  α275'
//│ ╟── while constraining:  (α285' -> ‹∀ 2. (mem153' <: ((α285',) -> α286''') => (α295''' -> α294'''))›)  <!<  ((α264',) -> α275')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α264',) -> α275')
//│ ╟── while constraining:  mem153'  <!<  ((α264',) -> α275')
//│ ╟── while constraining:  (mem153' <: ((α264',) -> α275') => (α284' -> α283'))  <!<  ((α255',) -> α258')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α264',) -> α265''') => (α274''' -> α273'''))›  <!<  ((α255',) -> α258')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α264',) -> α265''') => (α274''' -> α273'''))›  <!<  α254'
//│ ╟── while constraining:  (α264' -> ‹∀ 2. (mem153' <: ((α264',) -> α265''') => (α274''' -> α273'''))›)  <!<  ((α243',) -> α254')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α243',) -> α254')
//│ ╟── while constraining:  mem153'  <!<  ((α243',) -> α254')
//│ ╟── while constraining:  (mem153' <: ((α243',) -> α254') => (α263' -> α262'))  <!<  ((α234',) -> α237')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α243',) -> α244''') => (α253''' -> α252'''))›  <!<  ((α234',) -> α237')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α243',) -> α244''') => (α253''' -> α252'''))›  <!<  α233'
//│ ╟── while constraining:  (α243' -> ‹∀ 2. (mem153' <: ((α243',) -> α244''') => (α253''' -> α252'''))›)  <!<  ((α222',) -> α233')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α222',) -> α233')
//│ ╟── while constraining:  mem153'  <!<  ((α222',) -> α233')
//│ ╟── while constraining:  (mem153' <: ((α222',) -> α233') => (α242' -> α241'))  <!<  ((α213',) -> α216')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α222',) -> α223''') => (α232''' -> α231'''))›  <!<  ((α213',) -> α216')
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α222',) -> α223''') => (α232''' -> α231'''))›  <!<  α212'
//│ ╟── while constraining:  (α222' -> ‹∀ 2. (mem153' <: ((α222',) -> α223''') => (α232''' -> α231'''))›)  <!<  ((α201',) -> α212')
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  ((α201',) -> α212')
//│ ╟── while constraining:  mem153'  <!<  ((α201',) -> α212')
//│ ╟── while constraining:  (mem153' <: ((α201',) -> α212') => (α221' -> α220'))  <!<  (List[_α199''] -> Bool)
//│ ╟── while constraining:  ‹∀ 2. (mem153' <: ((α201',) -> α202''') => (α211''' -> α210'''))›  <!<  (List[_α199''] -> Bool)
//│ ╟── while constraining:  (α201' -> ‹∀ 2. (mem153' <: ((α201',) -> α202''') => (α211''' -> α210'''))›)  <!<  (_α199'' -> (List[_α199''] -> Bool))
//│ ╟── while constraining:  ‹∀ 1. (α154'' -> ‹∀ 2. (mem153' <: ((α154'',) -> α173''') => (α155''' -> α171'''))›)›  <!<  (_α199'' -> (List[_α199''] -> Bool))
//│ ╟── while constraining:  mem200'  <!<  (_α199'' -> (List[_α199''] -> Bool))
//│ ╟── while constraining:  ‹∀ 0. mem153'›  <!<  (_α199'' -> (List[_α199''] -> Bool))
//│ ╙── while constraining:  ‹∀ 0. mem153'›  <!<  ‹∀ 0. (α151' -> (List[α151'] -> Bool))›




// def fold_left[a, b]: (a -> b -> a) -> a -> List[b] -> a
def fold_left: forall 'a 'b. ('a -> 'b -> 'a) -> 'a -> List['b] -> 'a
//│ fold_left: ('a -> 'b -> 'a) -> 'a -> List['b] -> 'a

rec def fl f x l = match_list l x (fun head -> fun tail -> fl f (f x head) tail)
//│ fl: 'b -> (forall 'c. 'c -> (forall 'b, 'c, 'd, 'a, 'e. (List['a] -> ('c | 'e)
//│   where
//│     'fl <: 'b -> 'd -> List['a] -> 'e
//│     'b <: 'c -> 'a -> 'd))) | 'fl

rec def fl2 f x l = match_list l x (fun head -> fun tail -> fold_left f (f x head) tail)
//│ fl2: 'c -> (forall 'd. 'd -> (forall 'd, 'a, 'b. (List['b] -> ('a | 'd)
//│   where
//│     'c <: ('a | 'd) -> 'b -> 'a & 'd -> 'b -> 'a)))

// :d
def fold_left = fl
//│ 'b -> (forall 'c. 'c -> (forall 'b, 'c, 'd, 'a, 'e. (List['a] -> ('c | 'e)
//│   where
//│     'fl <: 'b -> 'd -> List['a] -> 'e
//│     'b <: 'c -> 'a -> 'd))) | 'fl
//│   <:  fold_left:
//│ ('a -> 'b -> 'a) -> 'a -> List['b] -> 'a
//│ ╔══[ERROR] Subtyping constraint of the form `forall ?a, ?c, ?d, ?a0, ?e, ?f, ?a1, ?g, ?h, ?a2, ?i, ?j, ?a3, ?k, ?l, ?a4, ?m, ?n, ?a5, ?o, ?p, ?a6, ?q, ?r, ?a7, ?s, ?t, ?a8, ?u, ?v, ?a9, ?w, ?x, ?a10, ?y, ?z, ?a11, ?a1, ?b1, ?a12, ?c1, ?d1, ?a13, ?e1, ?f1, ?a14, ?g1, ?h1, ?a15, ?i1, ?j1, ?a16, ?k1, ?l1, ?m1, ?n1, ?a17, ?o1, ?fl, ?p1, ?q1, ?r1, ?s1, ?t1, ?u1, ?v1, ?w1, ?x1, ?y1, ?z1, ?a2, ?b2, ?c2, ?d2, ?e2, ?f2, ?g2, ?h2, ?i2, ?j2, ?k2, ?l2, ?m2, ?n2, ?o2, ?p2, ?q2, ?r2, ?s2, ?t2, ?u2, ?v2, ?w2, ?x2, ?y2, ?z2, ?a3, ?b3, ?c3, ?b, ?d3, ?e3, ?f3, ?g3, ?h3, ?b0, ?i3, ?j3, ?k3, ?l3, ?m3, ?b1, ?n3, ?o3, ?p3, ?q3, ?r3, ?b2, ?s3, ?t3, ?u3, ?v3, ?w3, ?b3, ?x3, ?y3, ?z3, ?a4, ?b4, ?b4, ?c4, ?d4, ?e4, ?f4, ?g4, ?b5, ?h4, ?i4, ?j4, ?k4, ?l4, ?b6, ?m4, ?n4, ?o4, ?p4, ?q4, ?b7, ?r4, ?s4, ?t4, ?u4, ?v4, ?b8, ?w4, ?x4, ?y4, ?z4, ?a5, ?b9, ?b5, ?c5, ?d5, ?e5, ?f5, ?b10, ?g5, ?h5, ?i5, ?j5, ?k5, ?b11, ?l5, ?m5, ?n5, ?o5, ?p5, ?b12, ?q5, ?r5, ?s5, ?t5, ?u5, ?b13, ?v5, ?w5, ?x5, ?y5, ?z5, ?b14, ?a6, ?b6, ?c6, ?d6, ?e6, ?b15, ?f6, ?g6, ?h6, ?i6, ?j6, ?b16, ?k6, ?l6, ?m6, ?n6, ?o6, ?b17. ?fl <: forall ?a18, ?b18. (?a18 -> ?b18 -> ?a18) -> ?a18 -> List[?b18] -> ?a18` exceeded recursion depth limit (400)
//│ ║  l.291: 	def fold_left = fl
//│ ║         	^^^^^^^^^^^^^^^^^^
//│ ╟── while constraining:  α1763'  <!<  α2402'
//│ ╟── while constraining:  α1808'  <!<  α2402'
//│ ╟── while constraining:  α1853'  <!<  α2402'
//│ ╟── while constraining:  α1898'  <!<  α2402'
//│ ╟── while constraining:  α1943'  <!<  α2402'
//│ ╟── while constraining:  α1988'  <!<  α2402'
//│ ╟── while constraining:  α2033'  <!<  α2402'
//│ ╟── while constraining:  α2078'  <!<  α2402'
//│ ╟── while constraining:  α2123'  <!<  α2402'
//│ ╟── while constraining:  α2168'  <!<  α2402'
//│ ╟── while constraining:  α2213'  <!<  α2402'
//│ ╟── while constraining:  α2258'  <!<  α2402'
//│ ╟── while constraining:  α2303'  <!<  α2402'
//│ ╟── while constraining:  α2348'  <!<  α2402'
//│ ╟── while constraining:  α2393'  <!<  α2402'
//│ ╟── while constraining:  α2393'  <!<  α2425''
//│ ╟── while constraining:  (α2393',)  <!<  (α2425'',)
//│ ╟── while constraining:  (α2425'' -> ‹∀ 2. (α2426''' -> ‹∀ 3. (fl1430' <: ((α2425'',) -> α2427''''), α1431'' <: ((α2426''',) -> α2436'''') => (α2437'''' -> α2435''''))›)›)  <!<  ((α2393',) -> α2417')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α2393',) -> α2417')
//│ ╟── while constraining:  fl1430'  <!<  ((α2393',) -> α2417')
//│ ╟── while constraining:  fl1430'  <!<  ((α2393',) -> α2406'')
//│ ╟── while constraining:  (fl1430' <: ((α2393',) -> α2406''), α2402' <: ((α2400',) -> α2415'') => (α2416'' -> α2414''))  <!<  ((α2375',) -> α2377')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2393',) -> α2394''''), α2402' <: ((α2400',) -> α2403'''') => (α2404'''' -> α2401''''))›  <!<  ((α2375',) -> α2377')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2393',) -> α2394''''), α2402' <: ((α2400',) -> α2403'''') => (α2404'''' -> α2401''''))›  <!<  α2374'
//│ ╟── while constraining:  (α2405'' -> ‹∀ 3. (fl1430' <: ((α2393',) -> α2394''''), α2402' <: ((α2400',) -> α2403'''') => (α2404'''' -> α2401''''))›)  <!<  ((α2373',) -> α2374')
//│ ╟── while constraining:  ‹∀ 2. (α2381''' -> ‹∀ 3. (fl1430' <: ((α2393',) -> α2394''''), α2402' <: ((α2400',) -> α2403'''') => (α2404'''' -> α2401''''))›)›  <!<  ((α2373',) -> α2374')
//│ ╟── while constraining:  ‹∀ 2. (α2381''' -> ‹∀ 3. (fl1430' <: ((α2393',) -> α2394''''), α2402' <: ((α2400',) -> α2403'''') => (α2404'''' -> α2401''''))›)›  <!<  α2372'
//│ ╟── while constraining:  ‹∀ 2. (α2381''' -> ‹∀ 3. (fl1430' <: ((α2380'',) -> α2382''''), α1431'' <: ((α2381''',) -> α2391'''') => (α2392'''' -> α2390''''))›)›  <!<  α2372'
//│ ╟── while constraining:  (α2380'' -> ‹∀ 2. (α2381''' -> ‹∀ 3. (fl1430' <: ((α2380'',) -> α2382''''), α1431'' <: ((α2381''',) -> α2391'''') => (α2392'''' -> α2390''''))›)›)  <!<  ((α2348',) -> α2372')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α2348',) -> α2372')
//│ ╟── while constraining:  fl1430'  <!<  ((α2348',) -> α2372')
//│ ╟── while constraining:  fl1430'  <!<  ((α2348',) -> α2361'')
//│ ╟── while constraining:  (fl1430' <: ((α2348',) -> α2361''), α2357' <: ((α2355',) -> α2370'') => (α2371'' -> α2369''))  <!<  ((α2330',) -> α2332')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2348',) -> α2349''''), α2357' <: ((α2355',) -> α2358'''') => (α2359'''' -> α2356''''))›  <!<  ((α2330',) -> α2332')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2348',) -> α2349''''), α2357' <: ((α2355',) -> α2358'''') => (α2359'''' -> α2356''''))›  <!<  α2329'
//│ ╟── while constraining:  (α2360'' -> ‹∀ 3. (fl1430' <: ((α2348',) -> α2349''''), α2357' <: ((α2355',) -> α2358'''') => (α2359'''' -> α2356''''))›)  <!<  ((α2328',) -> α2329')
//│ ╟── while constraining:  ‹∀ 2. (α2336''' -> ‹∀ 3. (fl1430' <: ((α2348',) -> α2349''''), α2357' <: ((α2355',) -> α2358'''') => (α2359'''' -> α2356''''))›)›  <!<  ((α2328',) -> α2329')
//│ ╟── while constraining:  ‹∀ 2. (α2336''' -> ‹∀ 3. (fl1430' <: ((α2348',) -> α2349''''), α2357' <: ((α2355',) -> α2358'''') => (α2359'''' -> α2356''''))›)›  <!<  α2327'
//│ ╟── while constraining:  ‹∀ 2. (α2336''' -> ‹∀ 3. (fl1430' <: ((α2335'',) -> α2337''''), α1431'' <: ((α2336''',) -> α2346'''') => (α2347'''' -> α2345''''))›)›  <!<  α2327'
//│ ╟── while constraining:  (α2335'' -> ‹∀ 2. (α2336''' -> ‹∀ 3. (fl1430' <: ((α2335'',) -> α2337''''), α1431'' <: ((α2336''',) -> α2346'''') => (α2347'''' -> α2345''''))›)›)  <!<  ((α2303',) -> α2327')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α2303',) -> α2327')
//│ ╟── while constraining:  fl1430'  <!<  ((α2303',) -> α2327')
//│ ╟── while constraining:  fl1430'  <!<  ((α2303',) -> α2316'')
//│ ╟── while constraining:  (fl1430' <: ((α2303',) -> α2316''), α2312' <: ((α2310',) -> α2325'') => (α2326'' -> α2324''))  <!<  ((α2285',) -> α2287')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2303',) -> α2304''''), α2312' <: ((α2310',) -> α2313'''') => (α2314'''' -> α2311''''))›  <!<  ((α2285',) -> α2287')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2303',) -> α2304''''), α2312' <: ((α2310',) -> α2313'''') => (α2314'''' -> α2311''''))›  <!<  α2284'
//│ ╟── while constraining:  (α2315'' -> ‹∀ 3. (fl1430' <: ((α2303',) -> α2304''''), α2312' <: ((α2310',) -> α2313'''') => (α2314'''' -> α2311''''))›)  <!<  ((α2283',) -> α2284')
//│ ╟── while constraining:  ‹∀ 2. (α2291''' -> ‹∀ 3. (fl1430' <: ((α2303',) -> α2304''''), α2312' <: ((α2310',) -> α2313'''') => (α2314'''' -> α2311''''))›)›  <!<  ((α2283',) -> α2284')
//│ ╟── while constraining:  ‹∀ 2. (α2291''' -> ‹∀ 3. (fl1430' <: ((α2303',) -> α2304''''), α2312' <: ((α2310',) -> α2313'''') => (α2314'''' -> α2311''''))›)›  <!<  α2282'
//│ ╟── while constraining:  ‹∀ 2. (α2291''' -> ‹∀ 3. (fl1430' <: ((α2290'',) -> α2292''''), α1431'' <: ((α2291''',) -> α2301'''') => (α2302'''' -> α2300''''))›)›  <!<  α2282'
//│ ╟── while constraining:  (α2290'' -> ‹∀ 2. (α2291''' -> ‹∀ 3. (fl1430' <: ((α2290'',) -> α2292''''), α1431'' <: ((α2291''',) -> α2301'''') => (α2302'''' -> α2300''''))›)›)  <!<  ((α2258',) -> α2282')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α2258',) -> α2282')
//│ ╟── while constraining:  fl1430'  <!<  ((α2258',) -> α2282')
//│ ╟── while constraining:  fl1430'  <!<  ((α2258',) -> α2271'')
//│ ╟── while constraining:  (fl1430' <: ((α2258',) -> α2271''), α2267' <: ((α2265',) -> α2280'') => (α2281'' -> α2279''))  <!<  ((α2240',) -> α2242')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2258',) -> α2259''''), α2267' <: ((α2265',) -> α2268'''') => (α2269'''' -> α2266''''))›  <!<  ((α2240',) -> α2242')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2258',) -> α2259''''), α2267' <: ((α2265',) -> α2268'''') => (α2269'''' -> α2266''''))›  <!<  α2239'
//│ ╟── while constraining:  (α2270'' -> ‹∀ 3. (fl1430' <: ((α2258',) -> α2259''''), α2267' <: ((α2265',) -> α2268'''') => (α2269'''' -> α2266''''))›)  <!<  ((α2238',) -> α2239')
//│ ╟── while constraining:  ‹∀ 2. (α2246''' -> ‹∀ 3. (fl1430' <: ((α2258',) -> α2259''''), α2267' <: ((α2265',) -> α2268'''') => (α2269'''' -> α2266''''))›)›  <!<  ((α2238',) -> α2239')
//│ ╟── while constraining:  ‹∀ 2. (α2246''' -> ‹∀ 3. (fl1430' <: ((α2258',) -> α2259''''), α2267' <: ((α2265',) -> α2268'''') => (α2269'''' -> α2266''''))›)›  <!<  α2237'
//│ ╟── while constraining:  ‹∀ 2. (α2246''' -> ‹∀ 3. (fl1430' <: ((α2245'',) -> α2247''''), α1431'' <: ((α2246''',) -> α2256'''') => (α2257'''' -> α2255''''))›)›  <!<  α2237'
//│ ╟── while constraining:  (α2245'' -> ‹∀ 2. (α2246''' -> ‹∀ 3. (fl1430' <: ((α2245'',) -> α2247''''), α1431'' <: ((α2246''',) -> α2256'''') => (α2257'''' -> α2255''''))›)›)  <!<  ((α2213',) -> α2237')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α2213',) -> α2237')
//│ ╟── while constraining:  fl1430'  <!<  ((α2213',) -> α2237')
//│ ╟── while constraining:  fl1430'  <!<  ((α2213',) -> α2226'')
//│ ╟── while constraining:  (fl1430' <: ((α2213',) -> α2226''), α2222' <: ((α2220',) -> α2235'') => (α2236'' -> α2234''))  <!<  ((α2195',) -> α2197')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2213',) -> α2214''''), α2222' <: ((α2220',) -> α2223'''') => (α2224'''' -> α2221''''))›  <!<  ((α2195',) -> α2197')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2213',) -> α2214''''), α2222' <: ((α2220',) -> α2223'''') => (α2224'''' -> α2221''''))›  <!<  α2194'
//│ ╟── while constraining:  (α2225'' -> ‹∀ 3. (fl1430' <: ((α2213',) -> α2214''''), α2222' <: ((α2220',) -> α2223'''') => (α2224'''' -> α2221''''))›)  <!<  ((α2193',) -> α2194')
//│ ╟── while constraining:  ‹∀ 2. (α2201''' -> ‹∀ 3. (fl1430' <: ((α2213',) -> α2214''''), α2222' <: ((α2220',) -> α2223'''') => (α2224'''' -> α2221''''))›)›  <!<  ((α2193',) -> α2194')
//│ ╟── while constraining:  ‹∀ 2. (α2201''' -> ‹∀ 3. (fl1430' <: ((α2213',) -> α2214''''), α2222' <: ((α2220',) -> α2223'''') => (α2224'''' -> α2221''''))›)›  <!<  α2192'
//│ ╟── while constraining:  ‹∀ 2. (α2201''' -> ‹∀ 3. (fl1430' <: ((α2200'',) -> α2202''''), α1431'' <: ((α2201''',) -> α2211'''') => (α2212'''' -> α2210''''))›)›  <!<  α2192'
//│ ╟── while constraining:  (α2200'' -> ‹∀ 2. (α2201''' -> ‹∀ 3. (fl1430' <: ((α2200'',) -> α2202''''), α1431'' <: ((α2201''',) -> α2211'''') => (α2212'''' -> α2210''''))›)›)  <!<  ((α2168',) -> α2192')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α2168',) -> α2192')
//│ ╟── while constraining:  fl1430'  <!<  ((α2168',) -> α2192')
//│ ╟── while constraining:  fl1430'  <!<  ((α2168',) -> α2181'')
//│ ╟── while constraining:  (fl1430' <: ((α2168',) -> α2181''), α2177' <: ((α2175',) -> α2190'') => (α2191'' -> α2189''))  <!<  ((α2150',) -> α2152')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2168',) -> α2169''''), α2177' <: ((α2175',) -> α2178'''') => (α2179'''' -> α2176''''))›  <!<  ((α2150',) -> α2152')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2168',) -> α2169''''), α2177' <: ((α2175',) -> α2178'''') => (α2179'''' -> α2176''''))›  <!<  α2149'
//│ ╟── while constraining:  (α2180'' -> ‹∀ 3. (fl1430' <: ((α2168',) -> α2169''''), α2177' <: ((α2175',) -> α2178'''') => (α2179'''' -> α2176''''))›)  <!<  ((α2148',) -> α2149')
//│ ╟── while constraining:  ‹∀ 2. (α2156''' -> ‹∀ 3. (fl1430' <: ((α2168',) -> α2169''''), α2177' <: ((α2175',) -> α2178'''') => (α2179'''' -> α2176''''))›)›  <!<  ((α2148',) -> α2149')
//│ ╟── while constraining:  ‹∀ 2. (α2156''' -> ‹∀ 3. (fl1430' <: ((α2168',) -> α2169''''), α2177' <: ((α2175',) -> α2178'''') => (α2179'''' -> α2176''''))›)›  <!<  α2147'
//│ ╟── while constraining:  ‹∀ 2. (α2156''' -> ‹∀ 3. (fl1430' <: ((α2155'',) -> α2157''''), α1431'' <: ((α2156''',) -> α2166'''') => (α2167'''' -> α2165''''))›)›  <!<  α2147'
//│ ╟── while constraining:  (α2155'' -> ‹∀ 2. (α2156''' -> ‹∀ 3. (fl1430' <: ((α2155'',) -> α2157''''), α1431'' <: ((α2156''',) -> α2166'''') => (α2167'''' -> α2165''''))›)›)  <!<  ((α2123',) -> α2147')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α2123',) -> α2147')
//│ ╟── while constraining:  fl1430'  <!<  ((α2123',) -> α2147')
//│ ╟── while constraining:  fl1430'  <!<  ((α2123',) -> α2136'')
//│ ╟── while constraining:  (fl1430' <: ((α2123',) -> α2136''), α2132' <: ((α2130',) -> α2145'') => (α2146'' -> α2144''))  <!<  ((α2105',) -> α2107')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2123',) -> α2124''''), α2132' <: ((α2130',) -> α2133'''') => (α2134'''' -> α2131''''))›  <!<  ((α2105',) -> α2107')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2123',) -> α2124''''), α2132' <: ((α2130',) -> α2133'''') => (α2134'''' -> α2131''''))›  <!<  α2104'
//│ ╟── while constraining:  (α2135'' -> ‹∀ 3. (fl1430' <: ((α2123',) -> α2124''''), α2132' <: ((α2130',) -> α2133'''') => (α2134'''' -> α2131''''))›)  <!<  ((α2103',) -> α2104')
//│ ╟── while constraining:  ‹∀ 2. (α2111''' -> ‹∀ 3. (fl1430' <: ((α2123',) -> α2124''''), α2132' <: ((α2130',) -> α2133'''') => (α2134'''' -> α2131''''))›)›  <!<  ((α2103',) -> α2104')
//│ ╟── while constraining:  ‹∀ 2. (α2111''' -> ‹∀ 3. (fl1430' <: ((α2123',) -> α2124''''), α2132' <: ((α2130',) -> α2133'''') => (α2134'''' -> α2131''''))›)›  <!<  α2102'
//│ ╟── while constraining:  ‹∀ 2. (α2111''' -> ‹∀ 3. (fl1430' <: ((α2110'',) -> α2112''''), α1431'' <: ((α2111''',) -> α2121'''') => (α2122'''' -> α2120''''))›)›  <!<  α2102'
//│ ╟── while constraining:  (α2110'' -> ‹∀ 2. (α2111''' -> ‹∀ 3. (fl1430' <: ((α2110'',) -> α2112''''), α1431'' <: ((α2111''',) -> α2121'''') => (α2122'''' -> α2120''''))›)›)  <!<  ((α2078',) -> α2102')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α2078',) -> α2102')
//│ ╟── while constraining:  fl1430'  <!<  ((α2078',) -> α2102')
//│ ╟── while constraining:  fl1430'  <!<  ((α2078',) -> α2091'')
//│ ╟── while constraining:  (fl1430' <: ((α2078',) -> α2091''), α2087' <: ((α2085',) -> α2100'') => (α2101'' -> α2099''))  <!<  ((α2060',) -> α2062')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2078',) -> α2079''''), α2087' <: ((α2085',) -> α2088'''') => (α2089'''' -> α2086''''))›  <!<  ((α2060',) -> α2062')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2078',) -> α2079''''), α2087' <: ((α2085',) -> α2088'''') => (α2089'''' -> α2086''''))›  <!<  α2059'
//│ ╟── while constraining:  (α2090'' -> ‹∀ 3. (fl1430' <: ((α2078',) -> α2079''''), α2087' <: ((α2085',) -> α2088'''') => (α2089'''' -> α2086''''))›)  <!<  ((α2058',) -> α2059')
//│ ╟── while constraining:  ‹∀ 2. (α2066''' -> ‹∀ 3. (fl1430' <: ((α2078',) -> α2079''''), α2087' <: ((α2085',) -> α2088'''') => (α2089'''' -> α2086''''))›)›  <!<  ((α2058',) -> α2059')
//│ ╟── while constraining:  ‹∀ 2. (α2066''' -> ‹∀ 3. (fl1430' <: ((α2078',) -> α2079''''), α2087' <: ((α2085',) -> α2088'''') => (α2089'''' -> α2086''''))›)›  <!<  α2057'
//│ ╟── while constraining:  ‹∀ 2. (α2066''' -> ‹∀ 3. (fl1430' <: ((α2065'',) -> α2067''''), α1431'' <: ((α2066''',) -> α2076'''') => (α2077'''' -> α2075''''))›)›  <!<  α2057'
//│ ╟── while constraining:  (α2065'' -> ‹∀ 2. (α2066''' -> ‹∀ 3. (fl1430' <: ((α2065'',) -> α2067''''), α1431'' <: ((α2066''',) -> α2076'''') => (α2077'''' -> α2075''''))›)›)  <!<  ((α2033',) -> α2057')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α2033',) -> α2057')
//│ ╟── while constraining:  fl1430'  <!<  ((α2033',) -> α2057')
//│ ╟── while constraining:  fl1430'  <!<  ((α2033',) -> α2046'')
//│ ╟── while constraining:  (fl1430' <: ((α2033',) -> α2046''), α2042' <: ((α2040',) -> α2055'') => (α2056'' -> α2054''))  <!<  ((α2015',) -> α2017')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2033',) -> α2034''''), α2042' <: ((α2040',) -> α2043'''') => (α2044'''' -> α2041''''))›  <!<  ((α2015',) -> α2017')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α2033',) -> α2034''''), α2042' <: ((α2040',) -> α2043'''') => (α2044'''' -> α2041''''))›  <!<  α2014'
//│ ╟── while constraining:  (α2045'' -> ‹∀ 3. (fl1430' <: ((α2033',) -> α2034''''), α2042' <: ((α2040',) -> α2043'''') => (α2044'''' -> α2041''''))›)  <!<  ((α2013',) -> α2014')
//│ ╟── while constraining:  ‹∀ 2. (α2021''' -> ‹∀ 3. (fl1430' <: ((α2033',) -> α2034''''), α2042' <: ((α2040',) -> α2043'''') => (α2044'''' -> α2041''''))›)›  <!<  ((α2013',) -> α2014')
//│ ╟── while constraining:  ‹∀ 2. (α2021''' -> ‹∀ 3. (fl1430' <: ((α2033',) -> α2034''''), α2042' <: ((α2040',) -> α2043'''') => (α2044'''' -> α2041''''))›)›  <!<  α2012'
//│ ╟── while constraining:  ‹∀ 2. (α2021''' -> ‹∀ 3. (fl1430' <: ((α2020'',) -> α2022''''), α1431'' <: ((α2021''',) -> α2031'''') => (α2032'''' -> α2030''''))›)›  <!<  α2012'
//│ ╟── while constraining:  (α2020'' -> ‹∀ 2. (α2021''' -> ‹∀ 3. (fl1430' <: ((α2020'',) -> α2022''''), α1431'' <: ((α2021''',) -> α2031'''') => (α2032'''' -> α2030''''))›)›)  <!<  ((α1988',) -> α2012')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α1988',) -> α2012')
//│ ╟── while constraining:  fl1430'  <!<  ((α1988',) -> α2012')
//│ ╟── while constraining:  fl1430'  <!<  ((α1988',) -> α2001'')
//│ ╟── while constraining:  (fl1430' <: ((α1988',) -> α2001''), α1997' <: ((α1995',) -> α2010'') => (α2011'' -> α2009''))  <!<  ((α1970',) -> α1972')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1988',) -> α1989''''), α1997' <: ((α1995',) -> α1998'''') => (α1999'''' -> α1996''''))›  <!<  ((α1970',) -> α1972')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1988',) -> α1989''''), α1997' <: ((α1995',) -> α1998'''') => (α1999'''' -> α1996''''))›  <!<  α1969'
//│ ╟── while constraining:  (α2000'' -> ‹∀ 3. (fl1430' <: ((α1988',) -> α1989''''), α1997' <: ((α1995',) -> α1998'''') => (α1999'''' -> α1996''''))›)  <!<  ((α1968',) -> α1969')
//│ ╟── while constraining:  ‹∀ 2. (α1976''' -> ‹∀ 3. (fl1430' <: ((α1988',) -> α1989''''), α1997' <: ((α1995',) -> α1998'''') => (α1999'''' -> α1996''''))›)›  <!<  ((α1968',) -> α1969')
//│ ╟── while constraining:  ‹∀ 2. (α1976''' -> ‹∀ 3. (fl1430' <: ((α1988',) -> α1989''''), α1997' <: ((α1995',) -> α1998'''') => (α1999'''' -> α1996''''))›)›  <!<  α1967'
//│ ╟── while constraining:  ‹∀ 2. (α1976''' -> ‹∀ 3. (fl1430' <: ((α1975'',) -> α1977''''), α1431'' <: ((α1976''',) -> α1986'''') => (α1987'''' -> α1985''''))›)›  <!<  α1967'
//│ ╟── while constraining:  (α1975'' -> ‹∀ 2. (α1976''' -> ‹∀ 3. (fl1430' <: ((α1975'',) -> α1977''''), α1431'' <: ((α1976''',) -> α1986'''') => (α1987'''' -> α1985''''))›)›)  <!<  ((α1943',) -> α1967')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α1943',) -> α1967')
//│ ╟── while constraining:  fl1430'  <!<  ((α1943',) -> α1967')
//│ ╟── while constraining:  fl1430'  <!<  ((α1943',) -> α1956'')
//│ ╟── while constraining:  (fl1430' <: ((α1943',) -> α1956''), α1952' <: ((α1950',) -> α1965'') => (α1966'' -> α1964''))  <!<  ((α1925',) -> α1927')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1943',) -> α1944''''), α1952' <: ((α1950',) -> α1953'''') => (α1954'''' -> α1951''''))›  <!<  ((α1925',) -> α1927')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1943',) -> α1944''''), α1952' <: ((α1950',) -> α1953'''') => (α1954'''' -> α1951''''))›  <!<  α1924'
//│ ╟── while constraining:  (α1955'' -> ‹∀ 3. (fl1430' <: ((α1943',) -> α1944''''), α1952' <: ((α1950',) -> α1953'''') => (α1954'''' -> α1951''''))›)  <!<  ((α1923',) -> α1924')
//│ ╟── while constraining:  ‹∀ 2. (α1931''' -> ‹∀ 3. (fl1430' <: ((α1943',) -> α1944''''), α1952' <: ((α1950',) -> α1953'''') => (α1954'''' -> α1951''''))›)›  <!<  ((α1923',) -> α1924')
//│ ╟── while constraining:  ‹∀ 2. (α1931''' -> ‹∀ 3. (fl1430' <: ((α1943',) -> α1944''''), α1952' <: ((α1950',) -> α1953'''') => (α1954'''' -> α1951''''))›)›  <!<  α1922'
//│ ╟── while constraining:  ‹∀ 2. (α1931''' -> ‹∀ 3. (fl1430' <: ((α1930'',) -> α1932''''), α1431'' <: ((α1931''',) -> α1941'''') => (α1942'''' -> α1940''''))›)›  <!<  α1922'
//│ ╟── while constraining:  (α1930'' -> ‹∀ 2. (α1931''' -> ‹∀ 3. (fl1430' <: ((α1930'',) -> α1932''''), α1431'' <: ((α1931''',) -> α1941'''') => (α1942'''' -> α1940''''))›)›)  <!<  ((α1898',) -> α1922')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α1898',) -> α1922')
//│ ╟── while constraining:  fl1430'  <!<  ((α1898',) -> α1922')
//│ ╟── while constraining:  fl1430'  <!<  ((α1898',) -> α1911'')
//│ ╟── while constraining:  (fl1430' <: ((α1898',) -> α1911''), α1907' <: ((α1905',) -> α1920'') => (α1921'' -> α1919''))  <!<  ((α1880',) -> α1882')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1898',) -> α1899''''), α1907' <: ((α1905',) -> α1908'''') => (α1909'''' -> α1906''''))›  <!<  ((α1880',) -> α1882')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1898',) -> α1899''''), α1907' <: ((α1905',) -> α1908'''') => (α1909'''' -> α1906''''))›  <!<  α1879'
//│ ╟── while constraining:  (α1910'' -> ‹∀ 3. (fl1430' <: ((α1898',) -> α1899''''), α1907' <: ((α1905',) -> α1908'''') => (α1909'''' -> α1906''''))›)  <!<  ((α1878',) -> α1879')
//│ ╟── while constraining:  ‹∀ 2. (α1886''' -> ‹∀ 3. (fl1430' <: ((α1898',) -> α1899''''), α1907' <: ((α1905',) -> α1908'''') => (α1909'''' -> α1906''''))›)›  <!<  ((α1878',) -> α1879')
//│ ╟── while constraining:  ‹∀ 2. (α1886''' -> ‹∀ 3. (fl1430' <: ((α1898',) -> α1899''''), α1907' <: ((α1905',) -> α1908'''') => (α1909'''' -> α1906''''))›)›  <!<  α1877'
//│ ╟── while constraining:  ‹∀ 2. (α1886''' -> ‹∀ 3. (fl1430' <: ((α1885'',) -> α1887''''), α1431'' <: ((α1886''',) -> α1896'''') => (α1897'''' -> α1895''''))›)›  <!<  α1877'
//│ ╟── while constraining:  (α1885'' -> ‹∀ 2. (α1886''' -> ‹∀ 3. (fl1430' <: ((α1885'',) -> α1887''''), α1431'' <: ((α1886''',) -> α1896'''') => (α1897'''' -> α1895''''))›)›)  <!<  ((α1853',) -> α1877')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α1853',) -> α1877')
//│ ╟── while constraining:  fl1430'  <!<  ((α1853',) -> α1877')
//│ ╟── while constraining:  fl1430'  <!<  ((α1853',) -> α1866'')
//│ ╟── while constraining:  (fl1430' <: ((α1853',) -> α1866''), α1862' <: ((α1860',) -> α1875'') => (α1876'' -> α1874''))  <!<  ((α1835',) -> α1837')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1853',) -> α1854''''), α1862' <: ((α1860',) -> α1863'''') => (α1864'''' -> α1861''''))›  <!<  ((α1835',) -> α1837')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1853',) -> α1854''''), α1862' <: ((α1860',) -> α1863'''') => (α1864'''' -> α1861''''))›  <!<  α1834'
//│ ╟── while constraining:  (α1865'' -> ‹∀ 3. (fl1430' <: ((α1853',) -> α1854''''), α1862' <: ((α1860',) -> α1863'''') => (α1864'''' -> α1861''''))›)  <!<  ((α1833',) -> α1834')
//│ ╟── while constraining:  ‹∀ 2. (α1841''' -> ‹∀ 3. (fl1430' <: ((α1853',) -> α1854''''), α1862' <: ((α1860',) -> α1863'''') => (α1864'''' -> α1861''''))›)›  <!<  ((α1833',) -> α1834')
//│ ╟── while constraining:  ‹∀ 2. (α1841''' -> ‹∀ 3. (fl1430' <: ((α1853',) -> α1854''''), α1862' <: ((α1860',) -> α1863'''') => (α1864'''' -> α1861''''))›)›  <!<  α1832'
//│ ╟── while constraining:  ‹∀ 2. (α1841''' -> ‹∀ 3. (fl1430' <: ((α1840'',) -> α1842''''), α1431'' <: ((α1841''',) -> α1851'''') => (α1852'''' -> α1850''''))›)›  <!<  α1832'
//│ ╟── while constraining:  (α1840'' -> ‹∀ 2. (α1841''' -> ‹∀ 3. (fl1430' <: ((α1840'',) -> α1842''''), α1431'' <: ((α1841''',) -> α1851'''') => (α1852'''' -> α1850''''))›)›)  <!<  ((α1808',) -> α1832')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α1808',) -> α1832')
//│ ╟── while constraining:  fl1430'  <!<  ((α1808',) -> α1832')
//│ ╟── while constraining:  fl1430'  <!<  ((α1808',) -> α1821'')
//│ ╟── while constraining:  (fl1430' <: ((α1808',) -> α1821''), α1817' <: ((α1815',) -> α1830'') => (α1831'' -> α1829''))  <!<  ((α1790',) -> α1792')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1808',) -> α1809''''), α1817' <: ((α1815',) -> α1818'''') => (α1819'''' -> α1816''''))›  <!<  ((α1790',) -> α1792')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1808',) -> α1809''''), α1817' <: ((α1815',) -> α1818'''') => (α1819'''' -> α1816''''))›  <!<  α1789'
//│ ╟── while constraining:  (α1820'' -> ‹∀ 3. (fl1430' <: ((α1808',) -> α1809''''), α1817' <: ((α1815',) -> α1818'''') => (α1819'''' -> α1816''''))›)  <!<  ((α1788',) -> α1789')
//│ ╟── while constraining:  ‹∀ 2. (α1796''' -> ‹∀ 3. (fl1430' <: ((α1808',) -> α1809''''), α1817' <: ((α1815',) -> α1818'''') => (α1819'''' -> α1816''''))›)›  <!<  ((α1788',) -> α1789')
//│ ╟── while constraining:  ‹∀ 2. (α1796''' -> ‹∀ 3. (fl1430' <: ((α1808',) -> α1809''''), α1817' <: ((α1815',) -> α1818'''') => (α1819'''' -> α1816''''))›)›  <!<  α1787'
//│ ╟── while constraining:  ‹∀ 2. (α1796''' -> ‹∀ 3. (fl1430' <: ((α1795'',) -> α1797''''), α1431'' <: ((α1796''',) -> α1806'''') => (α1807'''' -> α1805''''))›)›  <!<  α1787'
//│ ╟── while constraining:  (α1795'' -> ‹∀ 2. (α1796''' -> ‹∀ 3. (fl1430' <: ((α1795'',) -> α1797''''), α1431'' <: ((α1796''',) -> α1806'''') => (α1807'''' -> α1805''''))›)›)  <!<  ((α1763',) -> α1787')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α1763',) -> α1787')
//│ ╟── while constraining:  fl1430'  <!<  ((α1763',) -> α1787')
//│ ╟── while constraining:  fl1430'  <!<  ((α1763',) -> α1776'')
//│ ╟── while constraining:  (fl1430' <: ((α1763',) -> α1776''), α1772' <: ((α1770',) -> α1785'') => (α1786'' -> α1784''))  <!<  ((α1745',) -> α1747')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1763',) -> α1764''''), α1772' <: ((α1770',) -> α1773'''') => (α1774'''' -> α1771''''))›  <!<  ((α1745',) -> α1747')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1763',) -> α1764''''), α1772' <: ((α1770',) -> α1773'''') => (α1774'''' -> α1771''''))›  <!<  α1744'
//│ ╟── while constraining:  (α1775'' -> ‹∀ 3. (fl1430' <: ((α1763',) -> α1764''''), α1772' <: ((α1770',) -> α1773'''') => (α1774'''' -> α1771''''))›)  <!<  ((α1743',) -> α1744')
//│ ╟── while constraining:  ‹∀ 2. (α1751''' -> ‹∀ 3. (fl1430' <: ((α1763',) -> α1764''''), α1772' <: ((α1770',) -> α1773'''') => (α1774'''' -> α1771''''))›)›  <!<  ((α1743',) -> α1744')
//│ ╟── while constraining:  ‹∀ 2. (α1751''' -> ‹∀ 3. (fl1430' <: ((α1763',) -> α1764''''), α1772' <: ((α1770',) -> α1773'''') => (α1774'''' -> α1771''''))›)›  <!<  α1742'
//│ ╟── while constraining:  ‹∀ 2. (α1751''' -> ‹∀ 3. (fl1430' <: ((α1750'',) -> α1752''''), α1431'' <: ((α1751''',) -> α1761'''') => (α1762'''' -> α1760''''))›)›  <!<  α1742'
//│ ╟── while constraining:  (α1750'' -> ‹∀ 2. (α1751''' -> ‹∀ 3. (fl1430' <: ((α1750'',) -> α1752''''), α1431'' <: ((α1751''',) -> α1761'''') => (α1762'''' -> α1760''''))›)›)  <!<  ((α1718',) -> α1742')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α1718',) -> α1742')
//│ ╟── while constraining:  fl1430'  <!<  ((α1718',) -> α1742')
//│ ╟── while constraining:  fl1430'  <!<  ((α1718',) -> α1731'')
//│ ╟── while constraining:  (fl1430' <: ((α1718',) -> α1731''), α1727' <: ((α1725',) -> α1740'') => (α1741'' -> α1739''))  <!<  ((α1700',) -> α1702')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1718',) -> α1719''''), α1727' <: ((α1725',) -> α1728'''') => (α1729'''' -> α1726''''))›  <!<  ((α1700',) -> α1702')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1718',) -> α1719''''), α1727' <: ((α1725',) -> α1728'''') => (α1729'''' -> α1726''''))›  <!<  α1699'
//│ ╟── while constraining:  (α1730'' -> ‹∀ 3. (fl1430' <: ((α1718',) -> α1719''''), α1727' <: ((α1725',) -> α1728'''') => (α1729'''' -> α1726''''))›)  <!<  ((α1698',) -> α1699')
//│ ╟── while constraining:  ‹∀ 2. (α1706''' -> ‹∀ 3. (fl1430' <: ((α1718',) -> α1719''''), α1727' <: ((α1725',) -> α1728'''') => (α1729'''' -> α1726''''))›)›  <!<  ((α1698',) -> α1699')
//│ ╟── while constraining:  ‹∀ 2. (α1706''' -> ‹∀ 3. (fl1430' <: ((α1718',) -> α1719''''), α1727' <: ((α1725',) -> α1728'''') => (α1729'''' -> α1726''''))›)›  <!<  α1697'
//│ ╟── while constraining:  ‹∀ 2. (α1706''' -> ‹∀ 3. (fl1430' <: ((α1705'',) -> α1707''''), α1431'' <: ((α1706''',) -> α1716'''') => (α1717'''' -> α1715''''))›)›  <!<  α1697'
//│ ╟── while constraining:  (α1705'' -> ‹∀ 2. (α1706''' -> ‹∀ 3. (fl1430' <: ((α1705'',) -> α1707''''), α1431'' <: ((α1706''',) -> α1716'''') => (α1717'''' -> α1715''''))›)›)  <!<  ((α1673',) -> α1697')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α1673',) -> α1697')
//│ ╟── while constraining:  fl1430'  <!<  ((α1673',) -> α1697')
//│ ╟── while constraining:  fl1430'  <!<  ((α1673',) -> α1686'')
//│ ╟── while constraining:  (fl1430' <: ((α1673',) -> α1686''), α1682' <: ((α1680',) -> α1695'') => (α1696'' -> α1694''))  <!<  ((α1655',) -> α1657')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1673',) -> α1674''''), α1682' <: ((α1680',) -> α1683'''') => (α1684'''' -> α1681''''))›  <!<  ((α1655',) -> α1657')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1673',) -> α1674''''), α1682' <: ((α1680',) -> α1683'''') => (α1684'''' -> α1681''''))›  <!<  α1654'
//│ ╟── while constraining:  (α1685'' -> ‹∀ 3. (fl1430' <: ((α1673',) -> α1674''''), α1682' <: ((α1680',) -> α1683'''') => (α1684'''' -> α1681''''))›)  <!<  ((α1653',) -> α1654')
//│ ╟── while constraining:  ‹∀ 2. (α1661''' -> ‹∀ 3. (fl1430' <: ((α1673',) -> α1674''''), α1682' <: ((α1680',) -> α1683'''') => (α1684'''' -> α1681''''))›)›  <!<  ((α1653',) -> α1654')
//│ ╟── while constraining:  ‹∀ 2. (α1661''' -> ‹∀ 3. (fl1430' <: ((α1673',) -> α1674''''), α1682' <: ((α1680',) -> α1683'''') => (α1684'''' -> α1681''''))›)›  <!<  α1652'
//│ ╟── while constraining:  ‹∀ 2. (α1661''' -> ‹∀ 3. (fl1430' <: ((α1660'',) -> α1662''''), α1431'' <: ((α1661''',) -> α1671'''') => (α1672'''' -> α1670''''))›)›  <!<  α1652'
//│ ╟── while constraining:  (α1660'' -> ‹∀ 2. (α1661''' -> ‹∀ 3. (fl1430' <: ((α1660'',) -> α1662''''), α1431'' <: ((α1661''',) -> α1671'''') => (α1672'''' -> α1670''''))›)›)  <!<  ((α1628',) -> α1652')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α1628',) -> α1652')
//│ ╟── while constraining:  fl1430'  <!<  ((α1628',) -> α1652')
//│ ╟── while constraining:  fl1430'  <!<  ((α1628',) -> α1641'')
//│ ╟── while constraining:  (fl1430' <: ((α1628',) -> α1641''), α1637' <: ((α1635',) -> α1650'') => (α1651'' -> α1649''))  <!<  ((α1610',) -> α1612')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1628',) -> α1629''''), α1637' <: ((α1635',) -> α1638'''') => (α1639'''' -> α1636''''))›  <!<  ((α1610',) -> α1612')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1628',) -> α1629''''), α1637' <: ((α1635',) -> α1638'''') => (α1639'''' -> α1636''''))›  <!<  α1609'
//│ ╟── while constraining:  (α1640'' -> ‹∀ 3. (fl1430' <: ((α1628',) -> α1629''''), α1637' <: ((α1635',) -> α1638'''') => (α1639'''' -> α1636''''))›)  <!<  ((α1608',) -> α1609')
//│ ╟── while constraining:  ‹∀ 2. (α1616''' -> ‹∀ 3. (fl1430' <: ((α1628',) -> α1629''''), α1637' <: ((α1635',) -> α1638'''') => (α1639'''' -> α1636''''))›)›  <!<  ((α1608',) -> α1609')
//│ ╟── while constraining:  ‹∀ 2. (α1616''' -> ‹∀ 3. (fl1430' <: ((α1628',) -> α1629''''), α1637' <: ((α1635',) -> α1638'''') => (α1639'''' -> α1636''''))›)›  <!<  α1607'
//│ ╟── while constraining:  ‹∀ 2. (α1616''' -> ‹∀ 3. (fl1430' <: ((α1615'',) -> α1617''''), α1431'' <: ((α1616''',) -> α1626'''') => (α1627'''' -> α1625''''))›)›  <!<  α1607'
//│ ╟── while constraining:  (α1615'' -> ‹∀ 2. (α1616''' -> ‹∀ 3. (fl1430' <: ((α1615'',) -> α1617''''), α1431'' <: ((α1616''',) -> α1626'''') => (α1627'''' -> α1625''''))›)›)  <!<  ((α1606',) -> α1607')
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((α1606',) -> α1607')
//│ ╟── while constraining:  fl1430'  <!<  ((α1606',) -> α1607')
//│ ╟── while constraining:  fl1430'  <!<  ((α1570'',) -> α1595'')
//│ ╟── while constraining:  (fl1430' <: ((α1570'',) -> α1595''), α1431'' <: ((α1583'',) -> α1604'') => (α1605'' -> α1603''))  <!<  (List[‘b''] -> ‘a'')
//│ ╟── while constraining:  ‹∀ 3. (fl1430' <: ((α1570'',) -> α1584''''), α1431'' <: ((α1583'',) -> α1593'''') => (α1594'''' -> α1592''''))›  <!<  (List[‘b''] -> ‘a'')
//│ ╟── while constraining:  (α1583'' -> ‹∀ 3. (fl1430' <: ((α1570'',) -> α1584''''), α1431'' <: ((α1583'',) -> α1593'''') => (α1594'''' -> α1592''''))›)  <!<  (‘a'' -> (List[‘b''] -> ‘a''))
//│ ╟── while constraining:  ‹∀ 2. (α1571''' -> ‹∀ 3. (fl1430' <: ((α1570'',) -> α1572''''), α1431'' <: ((α1571''',) -> α1581'''') => (α1582'''' -> α1580''''))›)›  <!<  (‘a'' -> (List[‘b''] -> ‘a''))
//│ ╟── while constraining:  (α1570'' -> ‹∀ 2. (α1571''' -> ‹∀ 3. (fl1430' <: ((α1570'',) -> α1572''''), α1431'' <: ((α1571''',) -> α1581'''') => (α1582'''' -> α1580''''))›)›)  <!<  ((‘a'' -> (‘b'' -> ‘a'')) -> (‘a'' -> (List[‘b''] -> ‘a'')))
//│ ╟── while constraining:  ‹∀ 1. (α1431'' -> ‹∀ 2. (α1432''' -> ‹∀ 3. (fl1430' <: ((α1431'',) -> α1453''''), α1431'' <: ((α1432''',) -> α1458'''') => (α1433'''' -> α1445''''))›)›)›  <!<  ((‘a'' -> (‘b'' -> ‘a'')) -> (‘a'' -> (List[‘b''] -> ‘a'')))
//│ ╟── while constraining:  fl1569''  <!<  ((‘a'' -> (‘b'' -> ‘a'')) -> (‘a'' -> (List[‘b''] -> ‘a'')))
//│ ╟── while constraining:  ‹∀ 0. fl1430'›  <!<  ((‘a'' -> (‘b'' -> ‘a'')) -> (‘a'' -> (List[‘b''] -> ‘a'')))
//│ ╟── while constraining:  ‹∀ 0. ‹∀ 0. fl1430'››  <!<  ((‘a'' -> (‘b'' -> ‘a'')) -> (‘a'' -> (List[‘b''] -> ‘a'')))
//│ ╟── while constraining:  ‹∀ 0. ‹∀ 0. fl1430'››  <!<  ‹∀ 1. (('a1422'' -> ('b1423'' -> 'a1422'')) -> ('a1422'' -> (List['b1423''] -> 'a1422'')))›
//│ ╙── while constraining:  ‹∀ 0. ‹∀ 0. fl1430'››  <!<  ‹∀ 0. ‹∀ 1. (('a1422'' -> ('b1423'' -> 'a1422'')) -> ('a1422'' -> (List['b1423''] -> 'a1422'')))››

def fold_left = fl2
//│ 'c -> (forall 'd. 'd -> (forall 'd, 'a, 'b. (List['b] -> ('a | 'd)
//│   where
//│     'c <: ('a | 'd) -> 'b -> 'a & 'd -> 'b -> 'a)))
//│   <:  fold_left:
//│ ('a -> 'b -> 'a) -> 'a -> List['b] -> 'a

// :d
// rec def fold_left f x l = match_list l x (fun head -> fun tail -> fold_left f (f x head) tail)

// ------------ polymorphic methods ------------

class Collection[a]: { l: List[a] }
  method Mem x = mem x this.l
  method Fold f x = fold_left f x this.l
//│ /!!!\ Uncaught error: scala.MatchError: (α2839'' <: ('a2847''' -> ('b2848''' -> 'a2847''')) => (α2849''' -> α2846''')) (of class mlscript.TyperDatatypes$ConstrainedType)
//│ 	at: mlscript.TypeDefs.$anonfun$computeVariances$4(TypeDefs.scala:610)
//│ 	at: scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.scala:18)
//│ 	at: mlscript.TyperHelpers.trace(TyperHelpers.scala:30)
//│ 	at: mlscript.TypeDefs.updateVariance$1(TypeDefs.scala:609)
//│ 	at: mlscript.TypeDefs.$anonfun$computeVariances$4(TypeDefs.scala:667)
//│ 	at: scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.scala:18)
//│ 	at: mlscript.TyperHelpers.trace(TyperHelpers.scala:30)
//│ 	at: mlscript.TypeDefs.updateVariance$1(TypeDefs.scala:609)
//│ 	at: mlscript.TypeDefs.$anonfun$computeVariances$4(TypeDefs.scala:665)
//│ 	at: scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.scala:18)

def coll_mem c x = c.Mem x
//│ coll_mem: 'a -> ('a -> bool
//│   where
//│     'a <: Collection['a])

// typo in the paper? it was `fun x -> fun y -> ...`
def simple_and_double c =
  let l1 = c.Fold (fun y -> fun x -> cons x y) nil in
  let l2 = c.Fold (fun y -> fun x -> cons ((x, x),) y) nil in
  (l1, l2)
//│ simple_and_double: Collection[?] -> (List[nothing], List[nothing],)

simple_and_double (Collection{l = cons 1 nil})
//│ res: (List[nothing], List[nothing],)

// ------------ subtyping & methods ------------

class Float
class Color
class Point: { x: Float; y: Float }
class ColorPoint: Point & { c: Color }
class Circle: { x: Float; y: Float; r: Float }
  method Distance: Point -> Float
//│ Defined class Float
//│ Defined class Color
//│ Defined class Point
//│ Defined class ColorPoint
//│ Defined class Circle
//│ Declared Circle.Distance: Circle -> Point -> Float

c = error : Circle
cp = error : ColorPoint
c.Distance cp
//│ c: Circle
//│ cp: ColorPoint
//│ res: Float
