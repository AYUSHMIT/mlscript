:NewParser
:NewDefs
:NoJS


class Foo()
123
//│ class Foo
//│ Typed: 123

Foo
//│ Typed: () -> Foo

fun fooo(x) =
  class C(y, z)
  C(0, x)
//│ fun fooo: ‹∀ 0. fooo26'#› where 
//│ |		fooo26'# := (α27' -> α35')
//│ |		α35' :> C<>
//│ [pretty-printed] fooo: anything -> C



module Test0_1 {
  fun a = Test0_2.b
}
module Test0_2 {
  fun b = 123
}
//│ class Test0_1
//│   fun a: ‹∀ 1. a44''#› where 
//│   |		a44''# := b49''
//│   |		b48''# := 123<int,number>
//│   |		b49'' :> ‹∀ 1. b48''#› <: a44''#
//│   [pretty-printed] a: 123
//│ class Test0_2
//│   fun b: ‹∀ 1. b48''#› where 
//│   |		b48''# := 123<int,number>
//│   [pretty-printed] b: 123

Test0_1.a
//│ Typed: 123


:e // TODO
module Test1_1 {
  fun a = Test1_2.b
}
module Test1_2 {
  fun b = Test1_1.a
}
//│ ╔══[ERROR] Cyclic definition
//│ ║  l.46: 	module Test1_1 {
//│ ║        	       ^^^^^^^^^
//│ ║  l.47: 	  fun a = Test1_2.b
//│ ║        	^^^^^^^^^^^^^^^^^^^
//│ ║  l.48: 	}
//│ ╙──      	^
//│ class Test1_1
//│   fun a: ‹∀ 1. a66''#› where 
//│   |		a66''# := b72''
//│   |		b70''# := a71''
//│   |		a71'' :> error<> <: b70''#
//│   |		b72'' :> ‹∀ 1. b70''#› <: a66''#
//│   [pretty-printed] a: error
//│ class Test1_2
//│   fun b: ‹∀ 1. b70''#› where 
//│   |		b70''# := a71''
//│   |		a71'' :> error<> <: b70''#
//│   [pretty-printed] b: error

Test1_1.a
//│ Typed: error


// TODO check TV hygiene
module Test2_1 {
  fun t2 = Test2_2
  fun a = Test2_2.b
  fun d = Test2_2.e
  fun n = 456
}
module Test2_2 {
  fun b = 123
  fun c = Test2_1.a
  fun e = Test2_1.n
}
//│ ╔══[ERROR] Cyclic definition
//│ ║  l.77: 	module Test2_1 {
//│ ║        	       ^^^^^^^^^
//│ ║  l.78: 	  fun t2 = Test2_2
//│ ║        	^^^^^^^^^^^^^^^^^^
//│ ║  l.79: 	  fun a = Test2_2.b
//│ ║        	^^^^^^^^^^^^^^^^^^^
//│ ║  l.80: 	  fun d = Test2_2.e
//│ ║        	^^^^^^^^^^^^^^^^^^^
//│ ║  l.81: 	  fun n = 456
//│ ║        	^^^^^^^^^^^^^
//│ ║  l.82: 	}
//│ ╙──      	^
//│ ╔══[ERROR] Cyclic definition
//│ ║  l.77: 	module Test2_1 {
//│ ║        	       ^^^^^^^^^
//│ ║  l.78: 	  fun t2 = Test2_2
//│ ║        	^^^^^^^^^^^^^^^^^^
//│ ║  l.79: 	  fun a = Test2_2.b
//│ ║        	^^^^^^^^^^^^^^^^^^^
//│ ║  l.80: 	  fun d = Test2_2.e
//│ ║        	^^^^^^^^^^^^^^^^^^^
//│ ║  l.81: 	  fun n = 456
//│ ║        	^^^^^^^^^^^^^
//│ ║  l.82: 	}
//│ ╙──      	^
//│ class Test2_1
//│   fun t2: ‹∀ 1. t295''#› where 
//│   |		t295''# := Test2_2<>
//│   [pretty-printed] t2: Test2_2
//│   fun a: ‹∀ 1. a106''#› where 
//│   |		b101''# := 123<int,number>
//│   |		a106''# := b107''
//│   |		b107'' :> ‹∀ 1. b101''#› <: a106''#
//│   [pretty-printed] a: 123
//│   fun d: ‹∀ 1. d111''#› where 
//│   |		e104''# := n105''
//│   |		n105'' :> error<> <: e104''#
//│   |		d111''# := e112''
//│   |		e112'' :> ‹∀ 1. e104''#› <: d111''#
//│   [pretty-printed] d: error
//│   fun n: ‹∀ 1. n116''#› where 
//│   |		n116''# := 456<int,number>
//│   [pretty-printed] n: 456
//│ class Test2_2
//│   fun b: ‹∀ 1. b101''#› where 
//│   |		b101''# := 123<int,number>
//│   [pretty-printed] b: 123
//│   fun c: ‹∀ 1. c102''#› where 
//│   |		c102''# := a103''
//│   |		a103'' :> error<> <: c102''#
//│   [pretty-printed] c: error
//│   fun e: ‹∀ 1. e104''#› where 
//│   |		e104''# := n105''
//│   |		n105'' :> error<> <: e104''#
//│   [pretty-printed] e: error

Test2_1.t2.b
//│ Typed: 123

Test2_1.a
//│ Typed: 123

// FIXME
Test2_1.d
//│ Typed: error

Test2_1.n
//│ Typed: 456

