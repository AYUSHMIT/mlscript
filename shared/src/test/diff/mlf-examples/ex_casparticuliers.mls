:GeneralizeCurriedFunctions

// (*** L'annotation est n�cessaire sur z, mais z n'est utilis� qu'une seule fois. ***)
// type sid = ['a] 'a -> 'a
type Sid = forall 'a. 'a -> 'a
//│ Defined type alias Sid

// let t (z:sid) = ( (fun a -> z) : ['a,'b] 'b -> 'a -> 'a )
def t (z: Sid) = (fun a -> z) : forall 'a 'b. 'b -> 'a -> 'a
//│ t: Sid -> (forall 'a. anything -> 'a -> 'a)
//│  = [Function: t]

// (* Une seule instance, mais polymorphe. *)
// let t z = ( (fun a -> z) : ['a,'b] 'b -> 'a -> 'a );;
def t z = (fun a -> z) : forall 'a 'b. 'b -> 'a -> 'a
//│ t: (‘a -> ‘a) -> (forall 'a. anything -> 'a -> 'a)
//│  = [Function: t1]

def t z = fun a -> z
//│ t: 'a -> anything -> 'a
//│  = [Function: t2]


// (*** Ne type pas avec les value-restriction. Emb�tant. ***)

// type Int = ['a] ('a -> 'a) -> ('a -> 'a)
// ;;
type ChurchInt = forall 'a. ('a -> 'a) -> ('a -> 'a)
//│ Defined type alias ChurchInt

// let zero f x = x
// ;;
def zero f x = x
//│ zero: anything -> (forall 'a. 'a -> 'a)
//│     = [Function: zero]

// let succ (n:Int) = fun f x -> f (n f x)
// ;;
def succ (n: ChurchInt) = fun f -> fun x -> f (n f x)
def succ' n = fun f -> fun x -> f (n f x)
//│ succ: ChurchInt -> (forall 'a. 'a -> (forall 'a, 'b, 'c, 'd, 'e. ('c -> 'e
//│   where
//│     'b <: 'a -> 'c -> 'd
//│     'a <: 'd -> 'e)))
//│     = [Function: succ]
//│ succ': 'a -> (forall 'b. 'b -> (forall 'a, 'b, 'c, 'd, 'e. ('e -> 'd
//│   where
//│     'b <: 'c -> 'd
//│     'a <: 'b -> 'e -> 'c)))
//│      = [Function: succ]

// let rec to_church n =
//   if n = 0 then zero
//   else succ (to_church (n-1))
// ;;
// FIXME: only works with explicit declaration for `succ`
//        might be an instance when we need constrained types to get the principal type
// def succ: ChurchInt -> ChurchInt
rec def to_church n =
  if n == 0 then zero
  else succ (to_church (n - 1))
rec def to_church' n =
  if n == 0 then zero
  else succ' (to_church' (n - 1))
//│ ╔══[ERROR] Type mismatch in binding of lambda expression:
//│ ║  l.59: 	rec def to_church n =
//│ ║        	                  ^^^
//│ ║  l.60: 	  if n == 0 then zero
//│ ║        	^^^^^^^^^^^^^^^^^^^^^
//│ ║  l.61: 	  else succ (to_church (n - 1))
//│ ║        	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//│ ╟── type `anything` does not match type `nothing`
//│ ║  l.28: 	type ChurchInt = forall 'a. ('a -> 'a) -> ('a -> 'a)
//│ ║        	                        ^^
//│ ╟── Note: constraint arises from quantified type variable:
//│ ║  l.28: 	type ChurchInt = forall 'a. ('a -> 'a) -> ('a -> 'a)
//│ ╙──      	                        ^^
//│ to_church: int -> (forall 'a. 'a -> (forall 'a, 'b, 'c, 'd, 'e, 'f. (('f & 'c) -> ('f | 'e)
//│   where
//│     'b <: 'a -> 'c -> 'd
//│     'a <: 'd -> 'e)))
//│          = [Function: to_church]
//│ to_church': int -> (forall 'a. 'a -> (forall 'a, 'b, 'c, 'd, 'e, 'f. (('f & 'e) -> ('f | 'c)
//│   where
//│     'a <: 'b -> 'c
//│     'd <: 'a -> 'e -> 'b)))
//│           = [Function: to_church]

// (* Marche *)
// let rec to_church n =
//   if n = 0 then fun f x -> x
//   else fun f x -> f ((to_church (n-1) : Int) f x)
// ;;
rec def to_church n =
  if n == 0 then fun f -> fun x -> x
  else fun f -> fun x -> f ((to_church (n - 1) : ChurchInt) f x)
//│ to_church: int -> (forall 'b. 'b -> (forall 'b, 'a, 'c. (('c & 'a) -> 'c
//│   where
//│     'b <: 'a -> 'a & 'a -> 'c)))
//│          = [Function: to_church1]

// (* Ne Marche Pas *)
// let rec to_church n =
//   if n = 0 then fun f x -> x
//   else (fun f x -> f ((to_church (n-1)) f x) : Int)
// ;;
rec def to_church n =
  if n == 0 then fun f -> fun x -> x
  else fun f -> fun x -> f ((to_church (n - 1)) f x) : ChurchInt
//│ to_church: int -> (forall 'a. 'a -> (forall 'a, 'b, 'c, 'd. ('c -> (ChurchInt | 'c)
//│   where
//│     'b <: 'a -> 'c -> 'd
//│     'a <: 'd -> ChurchInt)))
//│          = [Function: to_church2]


// (* La r�cursion est monomorphe. *)
// let rec to_church n =
//   if n = 0 then fun f x -> x
//   else fun f x -> f ((to_church (n-1)) f x)
// ;;
rec def to_church n =
  if n == 0 then fun f -> fun x -> x
  else fun f -> fun x -> f ((to_church (n - 1)) f x)
//│ to_church: int -> (forall 'a. 'a -> (forall 'a, 'b, 'c, 'd, 'e. (('c & 'e) -> 'c
//│   where
//│     'a <: 'b -> 'c
//│     'd <: 'a -> 'e -> 'b)))
//│          = [Function: to_church3]

// (* Echoue avec la value restriction. *)
// let rec (to_church:int -> Int) n =
//   if n = 0 then fun f x -> x
//   else fun f x -> f ((to_church (n-1)) f x)
// ;;
// FIXME: principal type for constrained types
def to_church: int -> ChurchInt
rec def to_church n =
  if n == 0 then fun f -> fun x -> x
  else fun f -> fun x -> f ((to_church (n - 1)) f x)
//│ to_church: int -> ChurchInt
//│          = <missing implementation>
//│ int -> (forall 'a. 'a -> (forall 'a, 'b, 'c, 'd, 'e. (('c & 'e) -> 'c
//│   where
//│     'a <: 'b -> 'c
//│     'd <: 'a -> 'e -> 'b)))
//│   <:  to_church:
//│ int -> ChurchInt
//│ ╔══[ERROR] Subtyping constraint of the form `forall ?a, ?to_church, ?b, ?c, ?d. ?to_church <: int -> ChurchInt` exceeded recursion depth limit (400)
//│ ║  l.138: 	rec def to_church n =
//│ ║         	^^^^^^^^^^^^^^^^^^^^^
//│ ║  l.139: 	  if n == 0 then fun f -> fun x -> x
//│ ║         	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//│ ║  l.140: 	  else fun f -> fun x -> f ((to_church (n - 1)) f x)
//│ ║         	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//│ ╟── while constraining:  α469'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α485'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α501'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α517'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α533'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α549'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α565'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α581'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α597'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α613'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α629'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α645'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α661'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α677'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α693'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α709'  <!<  ((α715',) -> α716')
//│ ╟── while constraining:  α709'  <!<  ((α711'',) -> α712'')
//│ ╟── while constraining:  {(α714'' -> α712'') where: α709' <: ((α711'',) -> α712''), α408' <: ((α709',) -> α713'')}  <!<  ((α702',) -> α703')
//│ ╟── while constraining:  ‹∀ 3. {(α708'''' -> α706'''') where: α709' <: ((α705'''',) -> α706''''), α408' <: ((α709',) -> α710'''')}›  <!<  ((α702',) -> α703')
//│ ╟── while constraining:  ‹∀ 3. {(α708'''' -> α706'''') where: α709' <: ((α705'''',) -> α706''''), α408' <: ((α709',) -> α710'''')}›  <!<  α701'
//│ ╟── while constraining:  ‹∀ 3. {(α708'''' -> α706'''') where: α704'' <: ((α705'''',) -> α706''''), α408' <: ((α704'',) -> α707'''')}›  <!<  α701'
//│ ╟── while constraining:  (α704'' -> ‹∀ 3. {(α708'''' -> α706'''') where: α704'' <: ((α705'''',) -> α706''''), α408' <: ((α704'',) -> α707'''')}›)  <!<  ((α693',) -> α701')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α693',) -> α701')
//│ ╟── while constraining:  α408'  <!<  ((α693',) -> α701')
//│ ╟── while constraining:  α408'  <!<  ((α693',) -> α697'')
//│ ╟── while constraining:  {(α698'' -> α696'') where: α693' <: ((α695'',) -> α696''), α408' <: ((α693',) -> α697'')}  <!<  ((α686',) -> α687')
//│ ╟── while constraining:  ‹∀ 3. {(α692'''' -> α690'''') where: α693' <: ((α689'''',) -> α690''''), α408' <: ((α693',) -> α694'''')}›  <!<  ((α686',) -> α687')
//│ ╟── while constraining:  ‹∀ 3. {(α692'''' -> α690'''') where: α693' <: ((α689'''',) -> α690''''), α408' <: ((α693',) -> α694'''')}›  <!<  α685'
//│ ╟── while constraining:  ‹∀ 3. {(α692'''' -> α690'''') where: α688'' <: ((α689'''',) -> α690''''), α408' <: ((α688'',) -> α691'''')}›  <!<  α685'
//│ ╟── while constraining:  (α688'' -> ‹∀ 3. {(α692'''' -> α690'''') where: α688'' <: ((α689'''',) -> α690''''), α408' <: ((α688'',) -> α691'''')}›)  <!<  ((α677',) -> α685')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α677',) -> α685')
//│ ╟── while constraining:  α408'  <!<  ((α677',) -> α685')
//│ ╟── while constraining:  α408'  <!<  ((α677',) -> α681'')
//│ ╟── while constraining:  {(α682'' -> α680'') where: α677' <: ((α679'',) -> α680''), α408' <: ((α677',) -> α681'')}  <!<  ((α670',) -> α671')
//│ ╟── while constraining:  ‹∀ 3. {(α676'''' -> α674'''') where: α677' <: ((α673'''',) -> α674''''), α408' <: ((α677',) -> α678'''')}›  <!<  ((α670',) -> α671')
//│ ╟── while constraining:  ‹∀ 3. {(α676'''' -> α674'''') where: α677' <: ((α673'''',) -> α674''''), α408' <: ((α677',) -> α678'''')}›  <!<  α669'
//│ ╟── while constraining:  ‹∀ 3. {(α676'''' -> α674'''') where: α672'' <: ((α673'''',) -> α674''''), α408' <: ((α672'',) -> α675'''')}›  <!<  α669'
//│ ╟── while constraining:  (α672'' -> ‹∀ 3. {(α676'''' -> α674'''') where: α672'' <: ((α673'''',) -> α674''''), α408' <: ((α672'',) -> α675'''')}›)  <!<  ((α661',) -> α669')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α661',) -> α669')
//│ ╟── while constraining:  α408'  <!<  ((α661',) -> α669')
//│ ╟── while constraining:  α408'  <!<  ((α661',) -> α665'')
//│ ╟── while constraining:  {(α666'' -> α664'') where: α661' <: ((α663'',) -> α664''), α408' <: ((α661',) -> α665'')}  <!<  ((α654',) -> α655')
//│ ╟── while constraining:  ‹∀ 3. {(α660'''' -> α658'''') where: α661' <: ((α657'''',) -> α658''''), α408' <: ((α661',) -> α662'''')}›  <!<  ((α654',) -> α655')
//│ ╟── while constraining:  ‹∀ 3. {(α660'''' -> α658'''') where: α661' <: ((α657'''',) -> α658''''), α408' <: ((α661',) -> α662'''')}›  <!<  α653'
//│ ╟── while constraining:  ‹∀ 3. {(α660'''' -> α658'''') where: α656'' <: ((α657'''',) -> α658''''), α408' <: ((α656'',) -> α659'''')}›  <!<  α653'
//│ ╟── while constraining:  (α656'' -> ‹∀ 3. {(α660'''' -> α658'''') where: α656'' <: ((α657'''',) -> α658''''), α408' <: ((α656'',) -> α659'''')}›)  <!<  ((α645',) -> α653')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α645',) -> α653')
//│ ╟── while constraining:  α408'  <!<  ((α645',) -> α653')
//│ ╟── while constraining:  α408'  <!<  ((α645',) -> α649'')
//│ ╟── while constraining:  {(α650'' -> α648'') where: α645' <: ((α647'',) -> α648''), α408' <: ((α645',) -> α649'')}  <!<  ((α638',) -> α639')
//│ ╟── while constraining:  ‹∀ 3. {(α644'''' -> α642'''') where: α645' <: ((α641'''',) -> α642''''), α408' <: ((α645',) -> α646'''')}›  <!<  ((α638',) -> α639')
//│ ╟── while constraining:  ‹∀ 3. {(α644'''' -> α642'''') where: α645' <: ((α641'''',) -> α642''''), α408' <: ((α645',) -> α646'''')}›  <!<  α637'
//│ ╟── while constraining:  ‹∀ 3. {(α644'''' -> α642'''') where: α640'' <: ((α641'''',) -> α642''''), α408' <: ((α640'',) -> α643'''')}›  <!<  α637'
//│ ╟── while constraining:  (α640'' -> ‹∀ 3. {(α644'''' -> α642'''') where: α640'' <: ((α641'''',) -> α642''''), α408' <: ((α640'',) -> α643'''')}›)  <!<  ((α629',) -> α637')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α629',) -> α637')
//│ ╟── while constraining:  α408'  <!<  ((α629',) -> α637')
//│ ╟── while constraining:  α408'  <!<  ((α629',) -> α633'')
//│ ╟── while constraining:  {(α634'' -> α632'') where: α629' <: ((α631'',) -> α632''), α408' <: ((α629',) -> α633'')}  <!<  ((α622',) -> α623')
//│ ╟── while constraining:  ‹∀ 3. {(α628'''' -> α626'''') where: α629' <: ((α625'''',) -> α626''''), α408' <: ((α629',) -> α630'''')}›  <!<  ((α622',) -> α623')
//│ ╟── while constraining:  ‹∀ 3. {(α628'''' -> α626'''') where: α629' <: ((α625'''',) -> α626''''), α408' <: ((α629',) -> α630'''')}›  <!<  α621'
//│ ╟── while constraining:  ‹∀ 3. {(α628'''' -> α626'''') where: α624'' <: ((α625'''',) -> α626''''), α408' <: ((α624'',) -> α627'''')}›  <!<  α621'
//│ ╟── while constraining:  (α624'' -> ‹∀ 3. {(α628'''' -> α626'''') where: α624'' <: ((α625'''',) -> α626''''), α408' <: ((α624'',) -> α627'''')}›)  <!<  ((α613',) -> α621')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α613',) -> α621')
//│ ╟── while constraining:  α408'  <!<  ((α613',) -> α621')
//│ ╟── while constraining:  α408'  <!<  ((α613',) -> α617'')
//│ ╟── while constraining:  {(α618'' -> α616'') where: α613' <: ((α615'',) -> α616''), α408' <: ((α613',) -> α617'')}  <!<  ((α606',) -> α607')
//│ ╟── while constraining:  ‹∀ 3. {(α612'''' -> α610'''') where: α613' <: ((α609'''',) -> α610''''), α408' <: ((α613',) -> α614'''')}›  <!<  ((α606',) -> α607')
//│ ╟── while constraining:  ‹∀ 3. {(α612'''' -> α610'''') where: α613' <: ((α609'''',) -> α610''''), α408' <: ((α613',) -> α614'''')}›  <!<  α605'
//│ ╟── while constraining:  ‹∀ 3. {(α612'''' -> α610'''') where: α608'' <: ((α609'''',) -> α610''''), α408' <: ((α608'',) -> α611'''')}›  <!<  α605'
//│ ╟── while constraining:  (α608'' -> ‹∀ 3. {(α612'''' -> α610'''') where: α608'' <: ((α609'''',) -> α610''''), α408' <: ((α608'',) -> α611'''')}›)  <!<  ((α597',) -> α605')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α597',) -> α605')
//│ ╟── while constraining:  α408'  <!<  ((α597',) -> α605')
//│ ╟── while constraining:  α408'  <!<  ((α597',) -> α601'')
//│ ╟── while constraining:  {(α602'' -> α600'') where: α597' <: ((α599'',) -> α600''), α408' <: ((α597',) -> α601'')}  <!<  ((α590',) -> α591')
//│ ╟── while constraining:  ‹∀ 3. {(α596'''' -> α594'''') where: α597' <: ((α593'''',) -> α594''''), α408' <: ((α597',) -> α598'''')}›  <!<  ((α590',) -> α591')
//│ ╟── while constraining:  ‹∀ 3. {(α596'''' -> α594'''') where: α597' <: ((α593'''',) -> α594''''), α408' <: ((α597',) -> α598'''')}›  <!<  α589'
//│ ╟── while constraining:  ‹∀ 3. {(α596'''' -> α594'''') where: α592'' <: ((α593'''',) -> α594''''), α408' <: ((α592'',) -> α595'''')}›  <!<  α589'
//│ ╟── while constraining:  (α592'' -> ‹∀ 3. {(α596'''' -> α594'''') where: α592'' <: ((α593'''',) -> α594''''), α408' <: ((α592'',) -> α595'''')}›)  <!<  ((α581',) -> α589')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α581',) -> α589')
//│ ╟── while constraining:  α408'  <!<  ((α581',) -> α589')
//│ ╟── while constraining:  α408'  <!<  ((α581',) -> α585'')
//│ ╟── while constraining:  {(α586'' -> α584'') where: α581' <: ((α583'',) -> α584''), α408' <: ((α581',) -> α585'')}  <!<  ((α574',) -> α575')
//│ ╟── while constraining:  ‹∀ 3. {(α580'''' -> α578'''') where: α581' <: ((α577'''',) -> α578''''), α408' <: ((α581',) -> α582'''')}›  <!<  ((α574',) -> α575')
//│ ╟── while constraining:  ‹∀ 3. {(α580'''' -> α578'''') where: α581' <: ((α577'''',) -> α578''''), α408' <: ((α581',) -> α582'''')}›  <!<  α573'
//│ ╟── while constraining:  ‹∀ 3. {(α580'''' -> α578'''') where: α576'' <: ((α577'''',) -> α578''''), α408' <: ((α576'',) -> α579'''')}›  <!<  α573'
//│ ╟── while constraining:  (α576'' -> ‹∀ 3. {(α580'''' -> α578'''') where: α576'' <: ((α577'''',) -> α578''''), α408' <: ((α576'',) -> α579'''')}›)  <!<  ((α565',) -> α573')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α565',) -> α573')
//│ ╟── while constraining:  α408'  <!<  ((α565',) -> α573')
//│ ╟── while constraining:  α408'  <!<  ((α565',) -> α569'')
//│ ╟── while constraining:  {(α570'' -> α568'') where: α565' <: ((α567'',) -> α568''), α408' <: ((α565',) -> α569'')}  <!<  ((α558',) -> α559')
//│ ╟── while constraining:  ‹∀ 3. {(α564'''' -> α562'''') where: α565' <: ((α561'''',) -> α562''''), α408' <: ((α565',) -> α566'''')}›  <!<  ((α558',) -> α559')
//│ ╟── while constraining:  ‹∀ 3. {(α564'''' -> α562'''') where: α565' <: ((α561'''',) -> α562''''), α408' <: ((α565',) -> α566'''')}›  <!<  α557'
//│ ╟── while constraining:  ‹∀ 3. {(α564'''' -> α562'''') where: α560'' <: ((α561'''',) -> α562''''), α408' <: ((α560'',) -> α563'''')}›  <!<  α557'
//│ ╟── while constraining:  (α560'' -> ‹∀ 3. {(α564'''' -> α562'''') where: α560'' <: ((α561'''',) -> α562''''), α408' <: ((α560'',) -> α563'''')}›)  <!<  ((α549',) -> α557')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α549',) -> α557')
//│ ╟── while constraining:  α408'  <!<  ((α549',) -> α557')
//│ ╟── while constraining:  α408'  <!<  ((α549',) -> α553'')
//│ ╟── while constraining:  {(α554'' -> α552'') where: α549' <: ((α551'',) -> α552''), α408' <: ((α549',) -> α553'')}  <!<  ((α542',) -> α543')
//│ ╟── while constraining:  ‹∀ 3. {(α548'''' -> α546'''') where: α549' <: ((α545'''',) -> α546''''), α408' <: ((α549',) -> α550'''')}›  <!<  ((α542',) -> α543')
//│ ╟── while constraining:  ‹∀ 3. {(α548'''' -> α546'''') where: α549' <: ((α545'''',) -> α546''''), α408' <: ((α549',) -> α550'''')}›  <!<  α541'
//│ ╟── while constraining:  ‹∀ 3. {(α548'''' -> α546'''') where: α544'' <: ((α545'''',) -> α546''''), α408' <: ((α544'',) -> α547'''')}›  <!<  α541'
//│ ╟── while constraining:  (α544'' -> ‹∀ 3. {(α548'''' -> α546'''') where: α544'' <: ((α545'''',) -> α546''''), α408' <: ((α544'',) -> α547'''')}›)  <!<  ((α533',) -> α541')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α533',) -> α541')
//│ ╟── while constraining:  α408'  <!<  ((α533',) -> α541')
//│ ╟── while constraining:  α408'  <!<  ((α533',) -> α537'')
//│ ╟── while constraining:  {(α538'' -> α536'') where: α533' <: ((α535'',) -> α536''), α408' <: ((α533',) -> α537'')}  <!<  ((α526',) -> α527')
//│ ╟── while constraining:  ‹∀ 3. {(α532'''' -> α530'''') where: α533' <: ((α529'''',) -> α530''''), α408' <: ((α533',) -> α534'''')}›  <!<  ((α526',) -> α527')
//│ ╟── while constraining:  ‹∀ 3. {(α532'''' -> α530'''') where: α533' <: ((α529'''',) -> α530''''), α408' <: ((α533',) -> α534'''')}›  <!<  α525'
//│ ╟── while constraining:  ‹∀ 3. {(α532'''' -> α530'''') where: α528'' <: ((α529'''',) -> α530''''), α408' <: ((α528'',) -> α531'''')}›  <!<  α525'
//│ ╟── while constraining:  (α528'' -> ‹∀ 3. {(α532'''' -> α530'''') where: α528'' <: ((α529'''',) -> α530''''), α408' <: ((α528'',) -> α531'''')}›)  <!<  ((α517',) -> α525')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α517',) -> α525')
//│ ╟── while constraining:  α408'  <!<  ((α517',) -> α525')
//│ ╟── while constraining:  α408'  <!<  ((α517',) -> α521'')
//│ ╟── while constraining:  {(α522'' -> α520'') where: α517' <: ((α519'',) -> α520''), α408' <: ((α517',) -> α521'')}  <!<  ((α510',) -> α511')
//│ ╟── while constraining:  ‹∀ 3. {(α516'''' -> α514'''') where: α517' <: ((α513'''',) -> α514''''), α408' <: ((α517',) -> α518'''')}›  <!<  ((α510',) -> α511')
//│ ╟── while constraining:  ‹∀ 3. {(α516'''' -> α514'''') where: α517' <: ((α513'''',) -> α514''''), α408' <: ((α517',) -> α518'''')}›  <!<  α509'
//│ ╟── while constraining:  ‹∀ 3. {(α516'''' -> α514'''') where: α512'' <: ((α513'''',) -> α514''''), α408' <: ((α512'',) -> α515'''')}›  <!<  α509'
//│ ╟── while constraining:  (α512'' -> ‹∀ 3. {(α516'''' -> α514'''') where: α512'' <: ((α513'''',) -> α514''''), α408' <: ((α512'',) -> α515'''')}›)  <!<  ((α501',) -> α509')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α501',) -> α509')
//│ ╟── while constraining:  α408'  <!<  ((α501',) -> α509')
//│ ╟── while constraining:  α408'  <!<  ((α501',) -> α505'')
//│ ╟── while constraining:  {(α506'' -> α504'') where: α501' <: ((α503'',) -> α504''), α408' <: ((α501',) -> α505'')}  <!<  ((α494',) -> α495')
//│ ╟── while constraining:  ‹∀ 3. {(α500'''' -> α498'''') where: α501' <: ((α497'''',) -> α498''''), α408' <: ((α501',) -> α502'''')}›  <!<  ((α494',) -> α495')
//│ ╟── while constraining:  ‹∀ 3. {(α500'''' -> α498'''') where: α501' <: ((α497'''',) -> α498''''), α408' <: ((α501',) -> α502'''')}›  <!<  α493'
//│ ╟── while constraining:  ‹∀ 3. {(α500'''' -> α498'''') where: α496'' <: ((α497'''',) -> α498''''), α408' <: ((α496'',) -> α499'''')}›  <!<  α493'
//│ ╟── while constraining:  (α496'' -> ‹∀ 3. {(α500'''' -> α498'''') where: α496'' <: ((α497'''',) -> α498''''), α408' <: ((α496'',) -> α499'''')}›)  <!<  ((α485',) -> α493')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α485',) -> α493')
//│ ╟── while constraining:  α408'  <!<  ((α485',) -> α493')
//│ ╟── while constraining:  α408'  <!<  ((α485',) -> α489'')
//│ ╟── while constraining:  {(α490'' -> α488'') where: α485' <: ((α487'',) -> α488''), α408' <: ((α485',) -> α489'')}  <!<  ((α478',) -> α479')
//│ ╟── while constraining:  ‹∀ 3. {(α484'''' -> α482'''') where: α485' <: ((α481'''',) -> α482''''), α408' <: ((α485',) -> α486'''')}›  <!<  ((α478',) -> α479')
//│ ╟── while constraining:  ‹∀ 3. {(α484'''' -> α482'''') where: α485' <: ((α481'''',) -> α482''''), α408' <: ((α485',) -> α486'''')}›  <!<  α477'
//│ ╟── while constraining:  ‹∀ 3. {(α484'''' -> α482'''') where: α480'' <: ((α481'''',) -> α482''''), α408' <: ((α480'',) -> α483'''')}›  <!<  α477'
//│ ╟── while constraining:  (α480'' -> ‹∀ 3. {(α484'''' -> α482'''') where: α480'' <: ((α481'''',) -> α482''''), α408' <: ((α480'',) -> α483'''')}›)  <!<  ((α469',) -> α477')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α469',) -> α477')
//│ ╟── while constraining:  α408'  <!<  ((α469',) -> α477')
//│ ╟── while constraining:  α408'  <!<  ((α469',) -> α473'')
//│ ╟── while constraining:  {(α474'' -> α472'') where: α469' <: ((α471'',) -> α472''), α408' <: ((α469',) -> α473'')}  <!<  ((α462',) -> α463')
//│ ╟── while constraining:  ‹∀ 3. {(α468'''' -> α466'''') where: α469' <: ((α465'''',) -> α466''''), α408' <: ((α469',) -> α470'''')}›  <!<  ((α462',) -> α463')
//│ ╟── while constraining:  ‹∀ 3. {(α468'''' -> α466'''') where: α469' <: ((α465'''',) -> α466''''), α408' <: ((α469',) -> α470'''')}›  <!<  α461'
//│ ╟── while constraining:  ‹∀ 3. {(α468'''' -> α466'''') where: α464'' <: ((α465'''',) -> α466''''), α408' <: ((α464'',) -> α467'''')}›  <!<  α461'
//│ ╟── while constraining:  (α464'' -> ‹∀ 3. {(α468'''' -> α466'''') where: α464'' <: ((α465'''',) -> α466''''), α408' <: ((α464'',) -> α467'''')}›)  <!<  ((α453',) -> α461')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α453',) -> α461')
//│ ╟── while constraining:  α408'  <!<  ((α453',) -> α461')
//│ ╟── while constraining:  α408'  <!<  ((α453',) -> α457'')
//│ ╟── while constraining:  {(α458'' -> α456'') where: α453' <: ((α455'',) -> α456''), α408' <: ((α453',) -> α457'')}  <!<  ((α446',) -> α447')
//│ ╟── while constraining:  ‹∀ 3. {(α452'''' -> α450'''') where: α453' <: ((α449'''',) -> α450''''), α408' <: ((α453',) -> α454'''')}›  <!<  ((α446',) -> α447')
//│ ╟── while constraining:  ‹∀ 3. {(α452'''' -> α450'''') where: α453' <: ((α449'''',) -> α450''''), α408' <: ((α453',) -> α454'''')}›  <!<  α445'
//│ ╟── while constraining:  ‹∀ 3. {(α452'''' -> α450'''') where: α448'' <: ((α449'''',) -> α450''''), α408' <: ((α448'',) -> α451'''')}›  <!<  α445'
//│ ╟── while constraining:  (α448'' -> ‹∀ 3. {(α452'''' -> α450'''') where: α448'' <: ((α449'''',) -> α450''''), α408' <: ((α448'',) -> α451'''')}›)  <!<  ((α437',) -> α445')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α437',) -> α445')
//│ ╟── while constraining:  α408'  <!<  ((α437',) -> α445')
//│ ╟── while constraining:  α408'  <!<  ((α437',) -> α441'')
//│ ╟── while constraining:  {(α442'' -> α440'') where: α437' <: ((α439'',) -> α440''), α408' <: ((α437',) -> α441'')}  <!<  ((α430',) -> α431')
//│ ╟── while constraining:  ‹∀ 3. {(α436'''' -> α434'''') where: α437' <: ((α433'''',) -> α434''''), α408' <: ((α437',) -> α438'''')}›  <!<  ((α430',) -> α431')
//│ ╟── while constraining:  ‹∀ 3. {(α436'''' -> α434'''') where: α437' <: ((α433'''',) -> α434''''), α408' <: ((α437',) -> α438'''')}›  <!<  α429'
//│ ╟── while constraining:  ‹∀ 3. {(α436'''' -> α434'''') where: α432'' <: ((α433'''',) -> α434''''), α408' <: ((α432'',) -> α435'''')}›  <!<  α429'
//│ ╟── while constraining:  (α432'' -> ‹∀ 3. {(α436'''' -> α434'''') where: α432'' <: ((α433'''',) -> α434''''), α408' <: ((α432'',) -> α435'''')}›)  <!<  ((α428',) -> α429')
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((α428',) -> α429')
//│ ╟── while constraining:  α408'  <!<  ((α428',) -> α429')
//│ ╟── while constraining:  α408'  <!<  ((α419'',) -> α426'')
//│ ╟── while constraining:  {(α427'' -> α425'') where: α419'' <: ((α424'',) -> α425''), α408' <: ((α419'',) -> α426'')}  <!<  (‘a'' -> ‘a'')
//│ ╟── while constraining:  ‹∀ 3. {(α423'''' -> α421'''') where: α419'' <: ((α420'''',) -> α421''''), α408' <: ((α419'',) -> α422'''')}›  <!<  (‘a'' -> ‘a'')
//│ ╟── while constraining:  (α419'' -> ‹∀ 3. {(α423'''' -> α421'''') where: α419'' <: ((α420'''',) -> α421''''), α408' <: ((α419'',) -> α422'''')}›)  <!<  ((‘a'' -> ‘a'') -> (‘a'' -> ‘a''))
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ((‘a'' -> ‘a'') -> (‘a'' -> ‘a''))
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ‹∀ 0. (('a49' -> 'a49') -> ('a49' -> 'a49'))›
//│ ╟── while constraining:  ‹∀ 2. (α407''' -> ‹∀ 3. {(α412'''' -> α410'''') where: α407''' <: ((α409'''',) -> α410''''), α408' <: ((α407''',) -> α411'''')}›)›  <!<  ChurchInt
//│ ╟── while constraining:  α416'  <!<  ChurchInt
//│ ╟── while constraining:  (α415' -> α416')  <!<  (Int -> ChurchInt)
//│ ╟── while constraining:  ‹∀ 1. (α405'' -> α406'')›  <!<  (Int -> ChurchInt)
//│ ╟── while constraining:  to_church404'  <!<  (Int -> ChurchInt)
//│ ╟── while constraining:  ‹∀ 0. to_church360'›  <!<  (Int -> ChurchInt)
//│ ╙── while constraining:  ‹∀ 0. to_church360'›  <!<  ‹∀ 0. (Int -> ChurchInt)›
//│          = [Function: to_church4]

:e // not precise enough
rec def to_church' n =
  if n == 0 then fun f -> fun x -> x
  else fun f -> fun x -> f ((to_church' (n - 1)) f x)
to_church = to_church'
//│ to_church': int -> (forall 'a. 'a -> (forall 'a, 'b, 'c, 'd, 'e. (('e & 'c) -> 'e
//│   where
//│     'b <: 'a -> 'c -> 'd
//│     'a <: 'd -> 'e)))
//│           = [Function: to_church4]
//│ int -> (forall 'a. 'a -> (forall 'a, 'b, 'c, 'd, 'e. (('e & 'c) -> 'e
//│   where
//│     'b <: 'a -> 'c -> 'd
//│     'a <: 'd -> 'e)))
//│   <:  to_church:
//│ int -> ChurchInt
//│ ╔══[ERROR] Subtyping constraint of the form `forall ?a, ?to_church', ?b, ?c, ?d. ?to_church' <: int -> ChurchInt` exceeded recursion depth limit (400)
//│ ║  l.335: 	to_church = to_church'
//│ ║         	^^^^^^^^^^^^^^^^^^^^^^
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α1103',) -> α1109')
//│ ╟── while constraining:  α794'  <!<  ((α1103',) -> α1109')
//│ ╟── while constraining:  α794'  <!<  ((α1103',) -> α1105'')
//│ ╟── while constraining:  {(α1106'' -> α1108'') where: α794' <: ((α1103',) -> α1105''), α1103' <: ((α1107'',) -> α1108'')}  <!<  ((α1096',) -> α1097')
//│ ╟── while constraining:  ‹∀ 3. {(α1100'''' -> α1102'''') where: α794' <: ((α1103',) -> α1104''''), α1103' <: ((α1101'''',) -> α1102'''')}›  <!<  ((α1096',) -> α1097')
//│ ╟── while constraining:  ‹∀ 3. {(α1100'''' -> α1102'''') where: α794' <: ((α1103',) -> α1104''''), α1103' <: ((α1101'''',) -> α1102'''')}›  <!<  α1095'
//│ ╟── while constraining:  ‹∀ 3. {(α1100'''' -> α1102'''') where: α794' <: ((α1098'',) -> α1099''''), α1098'' <: ((α1101'''',) -> α1102'''')}›  <!<  α1095'
//│ ╟── while constraining:  (α1098'' -> ‹∀ 3. {(α1100'''' -> α1102'''') where: α794' <: ((α1098'',) -> α1099''''), α1098'' <: ((α1101'''',) -> α1102'''')}›)  <!<  ((α1089',) -> α1095')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α1089',) -> α1095')
//│ ╟── while constraining:  α794'  <!<  ((α1089',) -> α1095')
//│ ╟── while constraining:  α794'  <!<  ((α1089',) -> α1091'')
//│ ╟── while constraining:  {(α1092'' -> α1094'') where: α794' <: ((α1089',) -> α1091''), α1089' <: ((α1093'',) -> α1094'')}  <!<  ((α1082',) -> α1083')
//│ ╟── while constraining:  ‹∀ 3. {(α1086'''' -> α1088'''') where: α794' <: ((α1089',) -> α1090''''), α1089' <: ((α1087'''',) -> α1088'''')}›  <!<  ((α1082',) -> α1083')
//│ ╟── while constraining:  ‹∀ 3. {(α1086'''' -> α1088'''') where: α794' <: ((α1089',) -> α1090''''), α1089' <: ((α1087'''',) -> α1088'''')}›  <!<  α1081'
//│ ╟── while constraining:  ‹∀ 3. {(α1086'''' -> α1088'''') where: α794' <: ((α1084'',) -> α1085''''), α1084'' <: ((α1087'''',) -> α1088'''')}›  <!<  α1081'
//│ ╟── while constraining:  (α1084'' -> ‹∀ 3. {(α1086'''' -> α1088'''') where: α794' <: ((α1084'',) -> α1085''''), α1084'' <: ((α1087'''',) -> α1088'''')}›)  <!<  ((α1075',) -> α1081')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α1075',) -> α1081')
//│ ╟── while constraining:  α794'  <!<  ((α1075',) -> α1081')
//│ ╟── while constraining:  α794'  <!<  ((α1075',) -> α1077'')
//│ ╟── while constraining:  {(α1078'' -> α1080'') where: α794' <: ((α1075',) -> α1077''), α1075' <: ((α1079'',) -> α1080'')}  <!<  ((α1068',) -> α1069')
//│ ╟── while constraining:  ‹∀ 3. {(α1072'''' -> α1074'''') where: α794' <: ((α1075',) -> α1076''''), α1075' <: ((α1073'''',) -> α1074'''')}›  <!<  ((α1068',) -> α1069')
//│ ╟── while constraining:  ‹∀ 3. {(α1072'''' -> α1074'''') where: α794' <: ((α1075',) -> α1076''''), α1075' <: ((α1073'''',) -> α1074'''')}›  <!<  α1067'
//│ ╟── while constraining:  ‹∀ 3. {(α1072'''' -> α1074'''') where: α794' <: ((α1070'',) -> α1071''''), α1070'' <: ((α1073'''',) -> α1074'''')}›  <!<  α1067'
//│ ╟── while constraining:  (α1070'' -> ‹∀ 3. {(α1072'''' -> α1074'''') where: α794' <: ((α1070'',) -> α1071''''), α1070'' <: ((α1073'''',) -> α1074'''')}›)  <!<  ((α1061',) -> α1067')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α1061',) -> α1067')
//│ ╟── while constraining:  α794'  <!<  ((α1061',) -> α1067')
//│ ╟── while constraining:  α794'  <!<  ((α1061',) -> α1063'')
//│ ╟── while constraining:  {(α1064'' -> α1066'') where: α794' <: ((α1061',) -> α1063''), α1061' <: ((α1065'',) -> α1066'')}  <!<  ((α1054',) -> α1055')
//│ ╟── while constraining:  ‹∀ 3. {(α1058'''' -> α1060'''') where: α794' <: ((α1061',) -> α1062''''), α1061' <: ((α1059'''',) -> α1060'''')}›  <!<  ((α1054',) -> α1055')
//│ ╟── while constraining:  ‹∀ 3. {(α1058'''' -> α1060'''') where: α794' <: ((α1061',) -> α1062''''), α1061' <: ((α1059'''',) -> α1060'''')}›  <!<  α1053'
//│ ╟── while constraining:  ‹∀ 3. {(α1058'''' -> α1060'''') where: α794' <: ((α1056'',) -> α1057''''), α1056'' <: ((α1059'''',) -> α1060'''')}›  <!<  α1053'
//│ ╟── while constraining:  (α1056'' -> ‹∀ 3. {(α1058'''' -> α1060'''') where: α794' <: ((α1056'',) -> α1057''''), α1056'' <: ((α1059'''',) -> α1060'''')}›)  <!<  ((α1047',) -> α1053')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α1047',) -> α1053')
//│ ╟── while constraining:  α794'  <!<  ((α1047',) -> α1053')
//│ ╟── while constraining:  α794'  <!<  ((α1047',) -> α1049'')
//│ ╟── while constraining:  {(α1050'' -> α1052'') where: α794' <: ((α1047',) -> α1049''), α1047' <: ((α1051'',) -> α1052'')}  <!<  ((α1040',) -> α1041')
//│ ╟── while constraining:  ‹∀ 3. {(α1044'''' -> α1046'''') where: α794' <: ((α1047',) -> α1048''''), α1047' <: ((α1045'''',) -> α1046'''')}›  <!<  ((α1040',) -> α1041')
//│ ╟── while constraining:  ‹∀ 3. {(α1044'''' -> α1046'''') where: α794' <: ((α1047',) -> α1048''''), α1047' <: ((α1045'''',) -> α1046'''')}›  <!<  α1039'
//│ ╟── while constraining:  ‹∀ 3. {(α1044'''' -> α1046'''') where: α794' <: ((α1042'',) -> α1043''''), α1042'' <: ((α1045'''',) -> α1046'''')}›  <!<  α1039'
//│ ╟── while constraining:  (α1042'' -> ‹∀ 3. {(α1044'''' -> α1046'''') where: α794' <: ((α1042'',) -> α1043''''), α1042'' <: ((α1045'''',) -> α1046'''')}›)  <!<  ((α1033',) -> α1039')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α1033',) -> α1039')
//│ ╟── while constraining:  α794'  <!<  ((α1033',) -> α1039')
//│ ╟── while constraining:  α794'  <!<  ((α1033',) -> α1035'')
//│ ╟── while constraining:  {(α1036'' -> α1038'') where: α794' <: ((α1033',) -> α1035''), α1033' <: ((α1037'',) -> α1038'')}  <!<  ((α1026',) -> α1027')
//│ ╟── while constraining:  ‹∀ 3. {(α1030'''' -> α1032'''') where: α794' <: ((α1033',) -> α1034''''), α1033' <: ((α1031'''',) -> α1032'''')}›  <!<  ((α1026',) -> α1027')
//│ ╟── while constraining:  ‹∀ 3. {(α1030'''' -> α1032'''') where: α794' <: ((α1033',) -> α1034''''), α1033' <: ((α1031'''',) -> α1032'''')}›  <!<  α1025'
//│ ╟── while constraining:  ‹∀ 3. {(α1030'''' -> α1032'''') where: α794' <: ((α1028'',) -> α1029''''), α1028'' <: ((α1031'''',) -> α1032'''')}›  <!<  α1025'
//│ ╟── while constraining:  (α1028'' -> ‹∀ 3. {(α1030'''' -> α1032'''') where: α794' <: ((α1028'',) -> α1029''''), α1028'' <: ((α1031'''',) -> α1032'''')}›)  <!<  ((α1019',) -> α1025')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α1019',) -> α1025')
//│ ╟── while constraining:  α794'  <!<  ((α1019',) -> α1025')
//│ ╟── while constraining:  α794'  <!<  ((α1019',) -> α1021'')
//│ ╟── while constraining:  {(α1022'' -> α1024'') where: α794' <: ((α1019',) -> α1021''), α1019' <: ((α1023'',) -> α1024'')}  <!<  ((α1012',) -> α1013')
//│ ╟── while constraining:  ‹∀ 3. {(α1016'''' -> α1018'''') where: α794' <: ((α1019',) -> α1020''''), α1019' <: ((α1017'''',) -> α1018'''')}›  <!<  ((α1012',) -> α1013')
//│ ╟── while constraining:  ‹∀ 3. {(α1016'''' -> α1018'''') where: α794' <: ((α1019',) -> α1020''''), α1019' <: ((α1017'''',) -> α1018'''')}›  <!<  α1011'
//│ ╟── while constraining:  ‹∀ 3. {(α1016'''' -> α1018'''') where: α794' <: ((α1014'',) -> α1015''''), α1014'' <: ((α1017'''',) -> α1018'''')}›  <!<  α1011'
//│ ╟── while constraining:  (α1014'' -> ‹∀ 3. {(α1016'''' -> α1018'''') where: α794' <: ((α1014'',) -> α1015''''), α1014'' <: ((α1017'''',) -> α1018'''')}›)  <!<  ((α1005',) -> α1011')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α1005',) -> α1011')
//│ ╟── while constraining:  α794'  <!<  ((α1005',) -> α1011')
//│ ╟── while constraining:  α794'  <!<  ((α1005',) -> α1007'')
//│ ╟── while constraining:  {(α1008'' -> α1010'') where: α794' <: ((α1005',) -> α1007''), α1005' <: ((α1009'',) -> α1010'')}  <!<  ((α998',) -> α999')
//│ ╟── while constraining:  ‹∀ 3. {(α1002'''' -> α1004'''') where: α794' <: ((α1005',) -> α1006''''), α1005' <: ((α1003'''',) -> α1004'''')}›  <!<  ((α998',) -> α999')
//│ ╟── while constraining:  ‹∀ 3. {(α1002'''' -> α1004'''') where: α794' <: ((α1005',) -> α1006''''), α1005' <: ((α1003'''',) -> α1004'''')}›  <!<  α997'
//│ ╟── while constraining:  ‹∀ 3. {(α1002'''' -> α1004'''') where: α794' <: ((α1000'',) -> α1001''''), α1000'' <: ((α1003'''',) -> α1004'''')}›  <!<  α997'
//│ ╟── while constraining:  (α1000'' -> ‹∀ 3. {(α1002'''' -> α1004'''') where: α794' <: ((α1000'',) -> α1001''''), α1000'' <: ((α1003'''',) -> α1004'''')}›)  <!<  ((α991',) -> α997')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α991',) -> α997')
//│ ╟── while constraining:  α794'  <!<  ((α991',) -> α997')
//│ ╟── while constraining:  α794'  <!<  ((α991',) -> α993'')
//│ ╟── while constraining:  {(α994'' -> α996'') where: α794' <: ((α991',) -> α993''), α991' <: ((α995'',) -> α996'')}  <!<  ((α984',) -> α985')
//│ ╟── while constraining:  ‹∀ 3. {(α988'''' -> α990'''') where: α794' <: ((α991',) -> α992''''), α991' <: ((α989'''',) -> α990'''')}›  <!<  ((α984',) -> α985')
//│ ╟── while constraining:  ‹∀ 3. {(α988'''' -> α990'''') where: α794' <: ((α991',) -> α992''''), α991' <: ((α989'''',) -> α990'''')}›  <!<  α983'
//│ ╟── while constraining:  ‹∀ 3. {(α988'''' -> α990'''') where: α794' <: ((α986'',) -> α987''''), α986'' <: ((α989'''',) -> α990'''')}›  <!<  α983'
//│ ╟── while constraining:  (α986'' -> ‹∀ 3. {(α988'''' -> α990'''') where: α794' <: ((α986'',) -> α987''''), α986'' <: ((α989'''',) -> α990'''')}›)  <!<  ((α977',) -> α983')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α977',) -> α983')
//│ ╟── while constraining:  α794'  <!<  ((α977',) -> α983')
//│ ╟── while constraining:  α794'  <!<  ((α977',) -> α979'')
//│ ╟── while constraining:  {(α980'' -> α982'') where: α794' <: ((α977',) -> α979''), α977' <: ((α981'',) -> α982'')}  <!<  ((α970',) -> α971')
//│ ╟── while constraining:  ‹∀ 3. {(α974'''' -> α976'''') where: α794' <: ((α977',) -> α978''''), α977' <: ((α975'''',) -> α976'''')}›  <!<  ((α970',) -> α971')
//│ ╟── while constraining:  ‹∀ 3. {(α974'''' -> α976'''') where: α794' <: ((α977',) -> α978''''), α977' <: ((α975'''',) -> α976'''')}›  <!<  α969'
//│ ╟── while constraining:  ‹∀ 3. {(α974'''' -> α976'''') where: α794' <: ((α972'',) -> α973''''), α972'' <: ((α975'''',) -> α976'''')}›  <!<  α969'
//│ ╟── while constraining:  (α972'' -> ‹∀ 3. {(α974'''' -> α976'''') where: α794' <: ((α972'',) -> α973''''), α972'' <: ((α975'''',) -> α976'''')}›)  <!<  ((α963',) -> α969')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α963',) -> α969')
//│ ╟── while constraining:  α794'  <!<  ((α963',) -> α969')
//│ ╟── while constraining:  α794'  <!<  ((α963',) -> α965'')
//│ ╟── while constraining:  {(α966'' -> α968'') where: α794' <: ((α963',) -> α965''), α963' <: ((α967'',) -> α968'')}  <!<  ((α956',) -> α957')
//│ ╟── while constraining:  ‹∀ 3. {(α960'''' -> α962'''') where: α794' <: ((α963',) -> α964''''), α963' <: ((α961'''',) -> α962'''')}›  <!<  ((α956',) -> α957')
//│ ╟── while constraining:  ‹∀ 3. {(α960'''' -> α962'''') where: α794' <: ((α963',) -> α964''''), α963' <: ((α961'''',) -> α962'''')}›  <!<  α955'
//│ ╟── while constraining:  ‹∀ 3. {(α960'''' -> α962'''') where: α794' <: ((α958'',) -> α959''''), α958'' <: ((α961'''',) -> α962'''')}›  <!<  α955'
//│ ╟── while constraining:  (α958'' -> ‹∀ 3. {(α960'''' -> α962'''') where: α794' <: ((α958'',) -> α959''''), α958'' <: ((α961'''',) -> α962'''')}›)  <!<  ((α949',) -> α955')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α949',) -> α955')
//│ ╟── while constraining:  α794'  <!<  ((α949',) -> α955')
//│ ╟── while constraining:  α794'  <!<  ((α949',) -> α951'')
//│ ╟── while constraining:  {(α952'' -> α954'') where: α794' <: ((α949',) -> α951''), α949' <: ((α953'',) -> α954'')}  <!<  ((α942',) -> α943')
//│ ╟── while constraining:  ‹∀ 3. {(α946'''' -> α948'''') where: α794' <: ((α949',) -> α950''''), α949' <: ((α947'''',) -> α948'''')}›  <!<  ((α942',) -> α943')
//│ ╟── while constraining:  ‹∀ 3. {(α946'''' -> α948'''') where: α794' <: ((α949',) -> α950''''), α949' <: ((α947'''',) -> α948'''')}›  <!<  α941'
//│ ╟── while constraining:  ‹∀ 3. {(α946'''' -> α948'''') where: α794' <: ((α944'',) -> α945''''), α944'' <: ((α947'''',) -> α948'''')}›  <!<  α941'
//│ ╟── while constraining:  (α944'' -> ‹∀ 3. {(α946'''' -> α948'''') where: α794' <: ((α944'',) -> α945''''), α944'' <: ((α947'''',) -> α948'''')}›)  <!<  ((α935',) -> α941')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α935',) -> α941')
//│ ╟── while constraining:  α794'  <!<  ((α935',) -> α941')
//│ ╟── while constraining:  α794'  <!<  ((α935',) -> α937'')
//│ ╟── while constraining:  {(α938'' -> α940'') where: α794' <: ((α935',) -> α937''), α935' <: ((α939'',) -> α940'')}  <!<  ((α928',) -> α929')
//│ ╟── while constraining:  ‹∀ 3. {(α932'''' -> α934'''') where: α794' <: ((α935',) -> α936''''), α935' <: ((α933'''',) -> α934'''')}›  <!<  ((α928',) -> α929')
//│ ╟── while constraining:  ‹∀ 3. {(α932'''' -> α934'''') where: α794' <: ((α935',) -> α936''''), α935' <: ((α933'''',) -> α934'''')}›  <!<  α927'
//│ ╟── while constraining:  ‹∀ 3. {(α932'''' -> α934'''') where: α794' <: ((α930'',) -> α931''''), α930'' <: ((α933'''',) -> α934'''')}›  <!<  α927'
//│ ╟── while constraining:  (α930'' -> ‹∀ 3. {(α932'''' -> α934'''') where: α794' <: ((α930'',) -> α931''''), α930'' <: ((α933'''',) -> α934'''')}›)  <!<  ((α921',) -> α927')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α921',) -> α927')
//│ ╟── while constraining:  α794'  <!<  ((α921',) -> α927')
//│ ╟── while constraining:  α794'  <!<  ((α921',) -> α923'')
//│ ╟── while constraining:  {(α924'' -> α926'') where: α794' <: ((α921',) -> α923''), α921' <: ((α925'',) -> α926'')}  <!<  ((α914',) -> α915')
//│ ╟── while constraining:  ‹∀ 3. {(α918'''' -> α920'''') where: α794' <: ((α921',) -> α922''''), α921' <: ((α919'''',) -> α920'''')}›  <!<  ((α914',) -> α915')
//│ ╟── while constraining:  ‹∀ 3. {(α918'''' -> α920'''') where: α794' <: ((α921',) -> α922''''), α921' <: ((α919'''',) -> α920'''')}›  <!<  α913'
//│ ╟── while constraining:  ‹∀ 3. {(α918'''' -> α920'''') where: α794' <: ((α916'',) -> α917''''), α916'' <: ((α919'''',) -> α920'''')}›  <!<  α913'
//│ ╟── while constraining:  (α916'' -> ‹∀ 3. {(α918'''' -> α920'''') where: α794' <: ((α916'',) -> α917''''), α916'' <: ((α919'''',) -> α920'''')}›)  <!<  ((α907',) -> α913')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α907',) -> α913')
//│ ╟── while constraining:  α794'  <!<  ((α907',) -> α913')
//│ ╟── while constraining:  α794'  <!<  ((α907',) -> α909'')
//│ ╟── while constraining:  {(α910'' -> α912'') where: α794' <: ((α907',) -> α909''), α907' <: ((α911'',) -> α912'')}  <!<  ((α900',) -> α901')
//│ ╟── while constraining:  ‹∀ 3. {(α904'''' -> α906'''') where: α794' <: ((α907',) -> α908''''), α907' <: ((α905'''',) -> α906'''')}›  <!<  ((α900',) -> α901')
//│ ╟── while constraining:  ‹∀ 3. {(α904'''' -> α906'''') where: α794' <: ((α907',) -> α908''''), α907' <: ((α905'''',) -> α906'''')}›  <!<  α899'
//│ ╟── while constraining:  ‹∀ 3. {(α904'''' -> α906'''') where: α794' <: ((α902'',) -> α903''''), α902'' <: ((α905'''',) -> α906'''')}›  <!<  α899'
//│ ╟── while constraining:  (α902'' -> ‹∀ 3. {(α904'''' -> α906'''') where: α794' <: ((α902'',) -> α903''''), α902'' <: ((α905'''',) -> α906'''')}›)  <!<  ((α893',) -> α899')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α893',) -> α899')
//│ ╟── while constraining:  α794'  <!<  ((α893',) -> α899')
//│ ╟── while constraining:  α794'  <!<  ((α893',) -> α895'')
//│ ╟── while constraining:  {(α896'' -> α898'') where: α794' <: ((α893',) -> α895''), α893' <: ((α897'',) -> α898'')}  <!<  ((α886',) -> α887')
//│ ╟── while constraining:  ‹∀ 3. {(α890'''' -> α892'''') where: α794' <: ((α893',) -> α894''''), α893' <: ((α891'''',) -> α892'''')}›  <!<  ((α886',) -> α887')
//│ ╟── while constraining:  ‹∀ 3. {(α890'''' -> α892'''') where: α794' <: ((α893',) -> α894''''), α893' <: ((α891'''',) -> α892'''')}›  <!<  α885'
//│ ╟── while constraining:  ‹∀ 3. {(α890'''' -> α892'''') where: α794' <: ((α888'',) -> α889''''), α888'' <: ((α891'''',) -> α892'''')}›  <!<  α885'
//│ ╟── while constraining:  (α888'' -> ‹∀ 3. {(α890'''' -> α892'''') where: α794' <: ((α888'',) -> α889''''), α888'' <: ((α891'''',) -> α892'''')}›)  <!<  ((α879',) -> α885')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α879',) -> α885')
//│ ╟── while constraining:  α794'  <!<  ((α879',) -> α885')
//│ ╟── while constraining:  α794'  <!<  ((α879',) -> α881'')
//│ ╟── while constraining:  {(α882'' -> α884'') where: α794' <: ((α879',) -> α881''), α879' <: ((α883'',) -> α884'')}  <!<  ((α872',) -> α873')
//│ ╟── while constraining:  ‹∀ 3. {(α876'''' -> α878'''') where: α794' <: ((α879',) -> α880''''), α879' <: ((α877'''',) -> α878'''')}›  <!<  ((α872',) -> α873')
//│ ╟── while constraining:  ‹∀ 3. {(α876'''' -> α878'''') where: α794' <: ((α879',) -> α880''''), α879' <: ((α877'''',) -> α878'''')}›  <!<  α871'
//│ ╟── while constraining:  ‹∀ 3. {(α876'''' -> α878'''') where: α794' <: ((α874'',) -> α875''''), α874'' <: ((α877'''',) -> α878'''')}›  <!<  α871'
//│ ╟── while constraining:  (α874'' -> ‹∀ 3. {(α876'''' -> α878'''') where: α794' <: ((α874'',) -> α875''''), α874'' <: ((α877'''',) -> α878'''')}›)  <!<  ((α865',) -> α871')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α865',) -> α871')
//│ ╟── while constraining:  α794'  <!<  ((α865',) -> α871')
//│ ╟── while constraining:  α794'  <!<  ((α865',) -> α867'')
//│ ╟── while constraining:  {(α868'' -> α870'') where: α794' <: ((α865',) -> α867''), α865' <: ((α869'',) -> α870'')}  <!<  ((α858',) -> α859')
//│ ╟── while constraining:  ‹∀ 3. {(α862'''' -> α864'''') where: α794' <: ((α865',) -> α866''''), α865' <: ((α863'''',) -> α864'''')}›  <!<  ((α858',) -> α859')
//│ ╟── while constraining:  ‹∀ 3. {(α862'''' -> α864'''') where: α794' <: ((α865',) -> α866''''), α865' <: ((α863'''',) -> α864'''')}›  <!<  α857'
//│ ╟── while constraining:  ‹∀ 3. {(α862'''' -> α864'''') where: α794' <: ((α860'',) -> α861''''), α860'' <: ((α863'''',) -> α864'''')}›  <!<  α857'
//│ ╟── while constraining:  (α860'' -> ‹∀ 3. {(α862'''' -> α864'''') where: α794' <: ((α860'',) -> α861''''), α860'' <: ((α863'''',) -> α864'''')}›)  <!<  ((α851',) -> α857')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α851',) -> α857')
//│ ╟── while constraining:  α794'  <!<  ((α851',) -> α857')
//│ ╟── while constraining:  α794'  <!<  ((α851',) -> α853'')
//│ ╟── while constraining:  {(α854'' -> α856'') where: α794' <: ((α851',) -> α853''), α851' <: ((α855'',) -> α856'')}  <!<  ((α844',) -> α845')
//│ ╟── while constraining:  ‹∀ 3. {(α848'''' -> α850'''') where: α794' <: ((α851',) -> α852''''), α851' <: ((α849'''',) -> α850'''')}›  <!<  ((α844',) -> α845')
//│ ╟── while constraining:  ‹∀ 3. {(α848'''' -> α850'''') where: α794' <: ((α851',) -> α852''''), α851' <: ((α849'''',) -> α850'''')}›  <!<  α843'
//│ ╟── while constraining:  ‹∀ 3. {(α848'''' -> α850'''') where: α794' <: ((α846'',) -> α847''''), α846'' <: ((α849'''',) -> α850'''')}›  <!<  α843'
//│ ╟── while constraining:  (α846'' -> ‹∀ 3. {(α848'''' -> α850'''') where: α794' <: ((α846'',) -> α847''''), α846'' <: ((α849'''',) -> α850'''')}›)  <!<  ((α837',) -> α843')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α837',) -> α843')
//│ ╟── while constraining:  α794'  <!<  ((α837',) -> α843')
//│ ╟── while constraining:  α794'  <!<  ((α837',) -> α839'')
//│ ╟── while constraining:  {(α840'' -> α842'') where: α794' <: ((α837',) -> α839''), α837' <: ((α841'',) -> α842'')}  <!<  ((α830',) -> α831')
//│ ╟── while constraining:  ‹∀ 3. {(α834'''' -> α836'''') where: α794' <: ((α837',) -> α838''''), α837' <: ((α835'''',) -> α836'''')}›  <!<  ((α830',) -> α831')
//│ ╟── while constraining:  ‹∀ 3. {(α834'''' -> α836'''') where: α794' <: ((α837',) -> α838''''), α837' <: ((α835'''',) -> α836'''')}›  <!<  α829'
//│ ╟── while constraining:  ‹∀ 3. {(α834'''' -> α836'''') where: α794' <: ((α832'',) -> α833''''), α832'' <: ((α835'''',) -> α836'''')}›  <!<  α829'
//│ ╟── while constraining:  (α832'' -> ‹∀ 3. {(α834'''' -> α836'''') where: α794' <: ((α832'',) -> α833''''), α832'' <: ((α835'''',) -> α836'''')}›)  <!<  ((α823',) -> α829')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α823',) -> α829')
//│ ╟── while constraining:  α794'  <!<  ((α823',) -> α829')
//│ ╟── while constraining:  α794'  <!<  ((α823',) -> α825'')
//│ ╟── while constraining:  {(α826'' -> α828'') where: α794' <: ((α823',) -> α825''), α823' <: ((α827'',) -> α828'')}  <!<  ((α816',) -> α817')
//│ ╟── while constraining:  ‹∀ 3. {(α820'''' -> α822'''') where: α794' <: ((α823',) -> α824''''), α823' <: ((α821'''',) -> α822'''')}›  <!<  ((α816',) -> α817')
//│ ╟── while constraining:  ‹∀ 3. {(α820'''' -> α822'''') where: α794' <: ((α823',) -> α824''''), α823' <: ((α821'''',) -> α822'''')}›  <!<  α815'
//│ ╟── while constraining:  ‹∀ 3. {(α820'''' -> α822'''') where: α794' <: ((α818'',) -> α819''''), α818'' <: ((α821'''',) -> α822'''')}›  <!<  α815'
//│ ╟── while constraining:  (α818'' -> ‹∀ 3. {(α820'''' -> α822'''') where: α794' <: ((α818'',) -> α819''''), α818'' <: ((α821'''',) -> α822'''')}›)  <!<  ((α814',) -> α815')
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((α814',) -> α815')
//│ ╟── while constraining:  α794'  <!<  ((α814',) -> α815')
//│ ╟── while constraining:  α794'  <!<  ((α805'',) -> α810'')
//│ ╟── while constraining:  {(α811'' -> α813'') where: α794' <: ((α805'',) -> α810''), α805'' <: ((α812'',) -> α813'')}  <!<  (‘a'' -> ‘a'')
//│ ╟── while constraining:  ‹∀ 3. {(α807'''' -> α809'''') where: α794' <: ((α805'',) -> α806''''), α805'' <: ((α808'''',) -> α809'''')}›  <!<  (‘a'' -> ‘a'')
//│ ╟── while constraining:  (α805'' -> ‹∀ 3. {(α807'''' -> α809'''') where: α794' <: ((α805'',) -> α806''''), α805'' <: ((α808'''',) -> α809'''')}›)  <!<  ((‘a'' -> ‘a'') -> (‘a'' -> ‘a''))
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ((‘a'' -> ‘a'') -> (‘a'' -> ‘a''))
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ‹∀ 0. (('a49' -> 'a49') -> ('a49' -> 'a49'))›
//│ ╟── while constraining:  ‹∀ 2. (α793''' -> ‹∀ 3. {(α796'''' -> α798'''') where: α794' <: ((α793''',) -> α795''''), α793''' <: ((α797'''',) -> α798'''')}›)›  <!<  ChurchInt
//│ ╟── while constraining:  α802'  <!<  ChurchInt
//│ ╟── while constraining:  (α801' -> α802')  <!<  (Int -> ChurchInt)
//│ ╟── while constraining:  ‹∀ 1. (α791'' -> α792'')›  <!<  (Int -> ChurchInt)
//│ ╟── while constraining:  to_church'790'  <!<  (Int -> ChurchInt)
//│ ╟── while constraining:  ‹∀ 0. to_church'724'›  <!<  (Int -> ChurchInt)
//│ ╟── while constraining:  ‹∀ 0. ‹∀ 0. to_church'724'››  <!<  (Int -> ChurchInt)
//│ ╙── while constraining:  ‹∀ 0. ‹∀ 0. to_church'724'››  <!<  ‹∀ 0. (Int -> ChurchInt)›
//│          = [Function: to_church4]

// emulates annotated rec def
def to_church' n =
  if n == 0 then fun f -> fun x -> x
  else fun f -> fun x -> f ((to_church' (n - 1)) f x)
//│ ╔══[ERROR] Subtyping constraint of the form `?a <: ?b -> ?c` exceeded recursion depth limit (400)
//│ ║  l.539: 	  else fun f -> fun x -> f ((to_church' (n - 1)) f x)
//│ ║         	                            ^^^^^^^^^^^^^^^^^^^^^^^^
//│ ╟── while constraining:  α1127'''  <!<  α1389''''
//│ ╟── while constraining:  α1384''''  <!<  α1389''''
//│ ╟── while constraining:  (α1384'''',)  <!<  (α1389'''',)
//│ ╟── while constraining:  (α1389'''' -> ‹∀ 3. {(α1392'''' -> α1394'''') where: α1390'''' <: ((α1389'''',) -> α1391''''), α1389'''' <: ((α1393'''',) -> α1394'''')}›)  <!<  ((α1384'''',) -> α1385'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1384'''',) -> α1385'''')
//│ ╟── while constraining:  α1383''''  <!<  ((α1384'''',) -> α1385'''')
//│ ╟── while constraining:  {(α1386'''' -> α1388'''') where: α1383'''' <: ((α1384'''',) -> α1385''''), α1384'''' <: ((α1387'''',) -> α1388'''')}  <!<  ((α1374'''',) -> α1375'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1380'''' -> α1382'''') where: α1378'''' <: ((α1377'''',) -> α1379''''), α1377'''' <: ((α1381'''',) -> α1382'''')}›  <!<  ((α1374'''',) -> α1375'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1380'''' -> α1382'''') where: α1378'''' <: ((α1377'''',) -> α1379''''), α1377'''' <: ((α1381'''',) -> α1382'''')}›  <!<  α1373''''
//│ ╟── while constraining:  (α1377'''' -> ‹∀ 3. {(α1380'''' -> α1382'''') where: α1378'''' <: ((α1377'''',) -> α1379''''), α1377'''' <: ((α1381'''',) -> α1382'''')}›)  <!<  ((α1372'''',) -> α1373'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1372'''',) -> α1373'''')
//│ ╟── while constraining:  α1371''''  <!<  ((α1372'''',) -> α1373'''')
//│ ╟── while constraining:  {(α1374'''' -> α1376'''') where: α1371'''' <: ((α1372'''',) -> α1373''''), α1372'''' <: ((α1375'''',) -> α1376'''')}  <!<  ((α1362'''',) -> α1363'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1368'''' -> α1370'''') where: α1366'''' <: ((α1365'''',) -> α1367''''), α1365'''' <: ((α1369'''',) -> α1370'''')}›  <!<  ((α1362'''',) -> α1363'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1368'''' -> α1370'''') where: α1366'''' <: ((α1365'''',) -> α1367''''), α1365'''' <: ((α1369'''',) -> α1370'''')}›  <!<  α1361''''
//│ ╟── while constraining:  (α1365'''' -> ‹∀ 3. {(α1368'''' -> α1370'''') where: α1366'''' <: ((α1365'''',) -> α1367''''), α1365'''' <: ((α1369'''',) -> α1370'''')}›)  <!<  ((α1360'''',) -> α1361'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1360'''',) -> α1361'''')
//│ ╟── while constraining:  α1359''''  <!<  ((α1360'''',) -> α1361'''')
//│ ╟── while constraining:  {(α1362'''' -> α1364'''') where: α1359'''' <: ((α1360'''',) -> α1361''''), α1360'''' <: ((α1363'''',) -> α1364'''')}  <!<  ((α1350'''',) -> α1351'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1356'''' -> α1358'''') where: α1354'''' <: ((α1353'''',) -> α1355''''), α1353'''' <: ((α1357'''',) -> α1358'''')}›  <!<  ((α1350'''',) -> α1351'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1356'''' -> α1358'''') where: α1354'''' <: ((α1353'''',) -> α1355''''), α1353'''' <: ((α1357'''',) -> α1358'''')}›  <!<  α1349''''
//│ ╟── while constraining:  (α1353'''' -> ‹∀ 3. {(α1356'''' -> α1358'''') where: α1354'''' <: ((α1353'''',) -> α1355''''), α1353'''' <: ((α1357'''',) -> α1358'''')}›)  <!<  ((α1348'''',) -> α1349'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1348'''',) -> α1349'''')
//│ ╟── while constraining:  α1347''''  <!<  ((α1348'''',) -> α1349'''')
//│ ╟── while constraining:  {(α1350'''' -> α1352'''') where: α1347'''' <: ((α1348'''',) -> α1349''''), α1348'''' <: ((α1351'''',) -> α1352'''')}  <!<  ((α1338'''',) -> α1339'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1344'''' -> α1346'''') where: α1342'''' <: ((α1341'''',) -> α1343''''), α1341'''' <: ((α1345'''',) -> α1346'''')}›  <!<  ((α1338'''',) -> α1339'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1344'''' -> α1346'''') where: α1342'''' <: ((α1341'''',) -> α1343''''), α1341'''' <: ((α1345'''',) -> α1346'''')}›  <!<  α1337''''
//│ ╟── while constraining:  (α1341'''' -> ‹∀ 3. {(α1344'''' -> α1346'''') where: α1342'''' <: ((α1341'''',) -> α1343''''), α1341'''' <: ((α1345'''',) -> α1346'''')}›)  <!<  ((α1336'''',) -> α1337'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1336'''',) -> α1337'''')
//│ ╟── while constraining:  α1335''''  <!<  ((α1336'''',) -> α1337'''')
//│ ╟── while constraining:  {(α1338'''' -> α1340'''') where: α1335'''' <: ((α1336'''',) -> α1337''''), α1336'''' <: ((α1339'''',) -> α1340'''')}  <!<  ((α1326'''',) -> α1327'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1332'''' -> α1334'''') where: α1330'''' <: ((α1329'''',) -> α1331''''), α1329'''' <: ((α1333'''',) -> α1334'''')}›  <!<  ((α1326'''',) -> α1327'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1332'''' -> α1334'''') where: α1330'''' <: ((α1329'''',) -> α1331''''), α1329'''' <: ((α1333'''',) -> α1334'''')}›  <!<  α1325''''
//│ ╟── while constraining:  (α1329'''' -> ‹∀ 3. {(α1332'''' -> α1334'''') where: α1330'''' <: ((α1329'''',) -> α1331''''), α1329'''' <: ((α1333'''',) -> α1334'''')}›)  <!<  ((α1324'''',) -> α1325'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1324'''',) -> α1325'''')
//│ ╟── while constraining:  α1323''''  <!<  ((α1324'''',) -> α1325'''')
//│ ╟── while constraining:  {(α1326'''' -> α1328'''') where: α1323'''' <: ((α1324'''',) -> α1325''''), α1324'''' <: ((α1327'''',) -> α1328'''')}  <!<  ((α1314'''',) -> α1315'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1320'''' -> α1322'''') where: α1318'''' <: ((α1317'''',) -> α1319''''), α1317'''' <: ((α1321'''',) -> α1322'''')}›  <!<  ((α1314'''',) -> α1315'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1320'''' -> α1322'''') where: α1318'''' <: ((α1317'''',) -> α1319''''), α1317'''' <: ((α1321'''',) -> α1322'''')}›  <!<  α1313''''
//│ ╟── while constraining:  (α1317'''' -> ‹∀ 3. {(α1320'''' -> α1322'''') where: α1318'''' <: ((α1317'''',) -> α1319''''), α1317'''' <: ((α1321'''',) -> α1322'''')}›)  <!<  ((α1312'''',) -> α1313'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1312'''',) -> α1313'''')
//│ ╟── while constraining:  α1311''''  <!<  ((α1312'''',) -> α1313'''')
//│ ╟── while constraining:  {(α1314'''' -> α1316'''') where: α1311'''' <: ((α1312'''',) -> α1313''''), α1312'''' <: ((α1315'''',) -> α1316'''')}  <!<  ((α1302'''',) -> α1303'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1308'''' -> α1310'''') where: α1306'''' <: ((α1305'''',) -> α1307''''), α1305'''' <: ((α1309'''',) -> α1310'''')}›  <!<  ((α1302'''',) -> α1303'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1308'''' -> α1310'''') where: α1306'''' <: ((α1305'''',) -> α1307''''), α1305'''' <: ((α1309'''',) -> α1310'''')}›  <!<  α1301''''
//│ ╟── while constraining:  (α1305'''' -> ‹∀ 3. {(α1308'''' -> α1310'''') where: α1306'''' <: ((α1305'''',) -> α1307''''), α1305'''' <: ((α1309'''',) -> α1310'''')}›)  <!<  ((α1300'''',) -> α1301'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1300'''',) -> α1301'''')
//│ ╟── while constraining:  α1299''''  <!<  ((α1300'''',) -> α1301'''')
//│ ╟── while constraining:  {(α1302'''' -> α1304'''') where: α1299'''' <: ((α1300'''',) -> α1301''''), α1300'''' <: ((α1303'''',) -> α1304'''')}  <!<  ((α1290'''',) -> α1291'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1296'''' -> α1298'''') where: α1294'''' <: ((α1293'''',) -> α1295''''), α1293'''' <: ((α1297'''',) -> α1298'''')}›  <!<  ((α1290'''',) -> α1291'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1296'''' -> α1298'''') where: α1294'''' <: ((α1293'''',) -> α1295''''), α1293'''' <: ((α1297'''',) -> α1298'''')}›  <!<  α1289''''
//│ ╟── while constraining:  (α1293'''' -> ‹∀ 3. {(α1296'''' -> α1298'''') where: α1294'''' <: ((α1293'''',) -> α1295''''), α1293'''' <: ((α1297'''',) -> α1298'''')}›)  <!<  ((α1288'''',) -> α1289'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1288'''',) -> α1289'''')
//│ ╟── while constraining:  α1287''''  <!<  ((α1288'''',) -> α1289'''')
//│ ╟── while constraining:  {(α1290'''' -> α1292'''') where: α1287'''' <: ((α1288'''',) -> α1289''''), α1288'''' <: ((α1291'''',) -> α1292'''')}  <!<  ((α1278'''',) -> α1279'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1284'''' -> α1286'''') where: α1282'''' <: ((α1281'''',) -> α1283''''), α1281'''' <: ((α1285'''',) -> α1286'''')}›  <!<  ((α1278'''',) -> α1279'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1284'''' -> α1286'''') where: α1282'''' <: ((α1281'''',) -> α1283''''), α1281'''' <: ((α1285'''',) -> α1286'''')}›  <!<  α1277''''
//│ ╟── while constraining:  (α1281'''' -> ‹∀ 3. {(α1284'''' -> α1286'''') where: α1282'''' <: ((α1281'''',) -> α1283''''), α1281'''' <: ((α1285'''',) -> α1286'''')}›)  <!<  ((α1276'''',) -> α1277'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1276'''',) -> α1277'''')
//│ ╟── while constraining:  α1275''''  <!<  ((α1276'''',) -> α1277'''')
//│ ╟── while constraining:  {(α1278'''' -> α1280'''') where: α1275'''' <: ((α1276'''',) -> α1277''''), α1276'''' <: ((α1279'''',) -> α1280'''')}  <!<  ((α1266'''',) -> α1267'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1272'''' -> α1274'''') where: α1270'''' <: ((α1269'''',) -> α1271''''), α1269'''' <: ((α1273'''',) -> α1274'''')}›  <!<  ((α1266'''',) -> α1267'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1272'''' -> α1274'''') where: α1270'''' <: ((α1269'''',) -> α1271''''), α1269'''' <: ((α1273'''',) -> α1274'''')}›  <!<  α1265''''
//│ ╟── while constraining:  (α1269'''' -> ‹∀ 3. {(α1272'''' -> α1274'''') where: α1270'''' <: ((α1269'''',) -> α1271''''), α1269'''' <: ((α1273'''',) -> α1274'''')}›)  <!<  ((α1264'''',) -> α1265'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1264'''',) -> α1265'''')
//│ ╟── while constraining:  α1263''''  <!<  ((α1264'''',) -> α1265'''')
//│ ╟── while constraining:  {(α1266'''' -> α1268'''') where: α1263'''' <: ((α1264'''',) -> α1265''''), α1264'''' <: ((α1267'''',) -> α1268'''')}  <!<  ((α1254'''',) -> α1255'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1260'''' -> α1262'''') where: α1258'''' <: ((α1257'''',) -> α1259''''), α1257'''' <: ((α1261'''',) -> α1262'''')}›  <!<  ((α1254'''',) -> α1255'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1260'''' -> α1262'''') where: α1258'''' <: ((α1257'''',) -> α1259''''), α1257'''' <: ((α1261'''',) -> α1262'''')}›  <!<  α1253''''
//│ ╟── while constraining:  (α1257'''' -> ‹∀ 3. {(α1260'''' -> α1262'''') where: α1258'''' <: ((α1257'''',) -> α1259''''), α1257'''' <: ((α1261'''',) -> α1262'''')}›)  <!<  ((α1252'''',) -> α1253'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1252'''',) -> α1253'''')
//│ ╟── while constraining:  α1251''''  <!<  ((α1252'''',) -> α1253'''')
//│ ╟── while constraining:  {(α1254'''' -> α1256'''') where: α1251'''' <: ((α1252'''',) -> α1253''''), α1252'''' <: ((α1255'''',) -> α1256'''')}  <!<  ((α1242'''',) -> α1243'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1248'''' -> α1250'''') where: α1246'''' <: ((α1245'''',) -> α1247''''), α1245'''' <: ((α1249'''',) -> α1250'''')}›  <!<  ((α1242'''',) -> α1243'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1248'''' -> α1250'''') where: α1246'''' <: ((α1245'''',) -> α1247''''), α1245'''' <: ((α1249'''',) -> α1250'''')}›  <!<  α1241''''
//│ ╟── while constraining:  (α1245'''' -> ‹∀ 3. {(α1248'''' -> α1250'''') where: α1246'''' <: ((α1245'''',) -> α1247''''), α1245'''' <: ((α1249'''',) -> α1250'''')}›)  <!<  ((α1240'''',) -> α1241'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1240'''',) -> α1241'''')
//│ ╟── while constraining:  α1239''''  <!<  ((α1240'''',) -> α1241'''')
//│ ╟── while constraining:  {(α1242'''' -> α1244'''') where: α1239'''' <: ((α1240'''',) -> α1241''''), α1240'''' <: ((α1243'''',) -> α1244'''')}  <!<  ((α1230'''',) -> α1231'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1236'''' -> α1238'''') where: α1234'''' <: ((α1233'''',) -> α1235''''), α1233'''' <: ((α1237'''',) -> α1238'''')}›  <!<  ((α1230'''',) -> α1231'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1236'''' -> α1238'''') where: α1234'''' <: ((α1233'''',) -> α1235''''), α1233'''' <: ((α1237'''',) -> α1238'''')}›  <!<  α1229''''
//│ ╟── while constraining:  (α1233'''' -> ‹∀ 3. {(α1236'''' -> α1238'''') where: α1234'''' <: ((α1233'''',) -> α1235''''), α1233'''' <: ((α1237'''',) -> α1238'''')}›)  <!<  ((α1228'''',) -> α1229'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1228'''',) -> α1229'''')
//│ ╟── while constraining:  α1227''''  <!<  ((α1228'''',) -> α1229'''')
//│ ╟── while constraining:  {(α1230'''' -> α1232'''') where: α1227'''' <: ((α1228'''',) -> α1229''''), α1228'''' <: ((α1231'''',) -> α1232'''')}  <!<  ((α1218'''',) -> α1219'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1224'''' -> α1226'''') where: α1222'''' <: ((α1221'''',) -> α1223''''), α1221'''' <: ((α1225'''',) -> α1226'''')}›  <!<  ((α1218'''',) -> α1219'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1224'''' -> α1226'''') where: α1222'''' <: ((α1221'''',) -> α1223''''), α1221'''' <: ((α1225'''',) -> α1226'''')}›  <!<  α1217''''
//│ ╟── while constraining:  (α1221'''' -> ‹∀ 3. {(α1224'''' -> α1226'''') where: α1222'''' <: ((α1221'''',) -> α1223''''), α1221'''' <: ((α1225'''',) -> α1226'''')}›)  <!<  ((α1216'''',) -> α1217'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1216'''',) -> α1217'''')
//│ ╟── while constraining:  α1215''''  <!<  ((α1216'''',) -> α1217'''')
//│ ╟── while constraining:  {(α1218'''' -> α1220'''') where: α1215'''' <: ((α1216'''',) -> α1217''''), α1216'''' <: ((α1219'''',) -> α1220'''')}  <!<  ((α1206'''',) -> α1207'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1212'''' -> α1214'''') where: α1210'''' <: ((α1209'''',) -> α1211''''), α1209'''' <: ((α1213'''',) -> α1214'''')}›  <!<  ((α1206'''',) -> α1207'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1212'''' -> α1214'''') where: α1210'''' <: ((α1209'''',) -> α1211''''), α1209'''' <: ((α1213'''',) -> α1214'''')}›  <!<  α1205''''
//│ ╟── while constraining:  (α1209'''' -> ‹∀ 3. {(α1212'''' -> α1214'''') where: α1210'''' <: ((α1209'''',) -> α1211''''), α1209'''' <: ((α1213'''',) -> α1214'''')}›)  <!<  ((α1204'''',) -> α1205'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1204'''',) -> α1205'''')
//│ ╟── while constraining:  α1203''''  <!<  ((α1204'''',) -> α1205'''')
//│ ╟── while constraining:  {(α1206'''' -> α1208'''') where: α1203'''' <: ((α1204'''',) -> α1205''''), α1204'''' <: ((α1207'''',) -> α1208'''')}  <!<  ((α1194'''',) -> α1195'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1200'''' -> α1202'''') where: α1198'''' <: ((α1197'''',) -> α1199''''), α1197'''' <: ((α1201'''',) -> α1202'''')}›  <!<  ((α1194'''',) -> α1195'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1200'''' -> α1202'''') where: α1198'''' <: ((α1197'''',) -> α1199''''), α1197'''' <: ((α1201'''',) -> α1202'''')}›  <!<  α1193''''
//│ ╟── while constraining:  (α1197'''' -> ‹∀ 3. {(α1200'''' -> α1202'''') where: α1198'''' <: ((α1197'''',) -> α1199''''), α1197'''' <: ((α1201'''',) -> α1202'''')}›)  <!<  ((α1192'''',) -> α1193'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1192'''',) -> α1193'''')
//│ ╟── while constraining:  α1191''''  <!<  ((α1192'''',) -> α1193'''')
//│ ╟── while constraining:  {(α1194'''' -> α1196'''') where: α1191'''' <: ((α1192'''',) -> α1193''''), α1192'''' <: ((α1195'''',) -> α1196'''')}  <!<  ((α1182'''',) -> α1183'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1188'''' -> α1190'''') where: α1186'''' <: ((α1185'''',) -> α1187''''), α1185'''' <: ((α1189'''',) -> α1190'''')}›  <!<  ((α1182'''',) -> α1183'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1188'''' -> α1190'''') where: α1186'''' <: ((α1185'''',) -> α1187''''), α1185'''' <: ((α1189'''',) -> α1190'''')}›  <!<  α1181''''
//│ ╟── while constraining:  (α1185'''' -> ‹∀ 3. {(α1188'''' -> α1190'''') where: α1186'''' <: ((α1185'''',) -> α1187''''), α1185'''' <: ((α1189'''',) -> α1190'''')}›)  <!<  ((α1180'''',) -> α1181'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1180'''',) -> α1181'''')
//│ ╟── while constraining:  α1179''''  <!<  ((α1180'''',) -> α1181'''')
//│ ╟── while constraining:  {(α1182'''' -> α1184'''') where: α1179'''' <: ((α1180'''',) -> α1181''''), α1180'''' <: ((α1183'''',) -> α1184'''')}  <!<  ((α1170'''',) -> α1171'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1176'''' -> α1178'''') where: α1174'''' <: ((α1173'''',) -> α1175''''), α1173'''' <: ((α1177'''',) -> α1178'''')}›  <!<  ((α1170'''',) -> α1171'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1176'''' -> α1178'''') where: α1174'''' <: ((α1173'''',) -> α1175''''), α1173'''' <: ((α1177'''',) -> α1178'''')}›  <!<  α1169''''
//│ ╟── while constraining:  (α1173'''' -> ‹∀ 3. {(α1176'''' -> α1178'''') where: α1174'''' <: ((α1173'''',) -> α1175''''), α1173'''' <: ((α1177'''',) -> α1178'''')}›)  <!<  ((α1168'''',) -> α1169'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1168'''',) -> α1169'''')
//│ ╟── while constraining:  α1167''''  <!<  ((α1168'''',) -> α1169'''')
//│ ╟── while constraining:  {(α1170'''' -> α1172'''') where: α1167'''' <: ((α1168'''',) -> α1169''''), α1168'''' <: ((α1171'''',) -> α1172'''')}  <!<  ((α1158'''',) -> α1159'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1164'''' -> α1166'''') where: α1162'''' <: ((α1161'''',) -> α1163''''), α1161'''' <: ((α1165'''',) -> α1166'''')}›  <!<  ((α1158'''',) -> α1159'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1164'''' -> α1166'''') where: α1162'''' <: ((α1161'''',) -> α1163''''), α1161'''' <: ((α1165'''',) -> α1166'''')}›  <!<  α1157''''
//│ ╟── while constraining:  (α1161'''' -> ‹∀ 3. {(α1164'''' -> α1166'''') where: α1162'''' <: ((α1161'''',) -> α1163''''), α1161'''' <: ((α1165'''',) -> α1166'''')}›)  <!<  ((α1156'''',) -> α1157'''')
//│ ╟── while constraining:  ‹∀ 2. (α1135''' -> ‹∀ 3. {(α1138'''' -> α1140'''') where: α1136'''' <: ((α1135''',) -> α1137''''), α1135''' <: ((α1139'''',) -> α1140'''')}›)›  <!<  ((α1156'''',) -> α1157'''')
//│ ╟── while constraining:  α1155''''  <!<  ((α1156'''',) -> α1157'''')
//│ ╟── while constraining:  {(α1158'''' -> α1160'''') where: α1155'''' <: ((α1156'''',) -> α1157''''), α1156'''' <: ((α1159'''',) -> α1160'''')}  <!<  ((α1128'''',) -> α1153'''')
//│ ╟── while constraining:  ‹∀ 3. {(α1149'''' -> α1151'''') where: α1147'''' <: ((α1146'''',) -> α1148''''), α1146'''' <: ((α1150'''',) -> α1151'''')}›  <!<  ((α1128'''',) -> α1153'''')
//│ ╙── while constraining:  α1145''''  <!<  ((α1128'''',) -> α1153'''')
//│ to_church': int -> (forall 'a. 'a -> (forall 'a, 'b, 'c. (('c & 'b) -> 'c
//│   where
//│     'a <: (error | 'b) -> 'c)))
//│           = [Function: to_church4]

// (* �a coince. *)
// let tc n = (to_church n : Int);;
def tc n = to_church n : ChurchInt
//│ tc: int -> ChurchInt
//│   = [Function: tc]

// (* Duplicate with to_church1 ("Marche") above *)
// (* Avec la value restriction : �a passe. *)
// let rec to_church n =
//   if n = 0 then fun f x -> x
//   else fun f x -> f ((to_church (n-1) : Int) f x)


// (*** Les annotations de type ne commutent pas. ***)
// type sid = ['a] 'a -> 'a
// type z = ['a,'b] ('a -> 'b) -> ('a -> 'b)
type Z = forall 'a 'b. ('a -> 'b) -> ('a -> 'b)
//│ Defined type alias Z

// let f x = (x:sid), ((x:sid):z)
def f x = ((x : Sid), ((x : Sid) : Z))
//│ f: Sid -> (Sid, Z,)
//│  = [Function: f]

// (* Ne type pas ... c'est une instance polymorphe. Interdit. *)
// untype fun x -> (x:sid), (x:z)
fun x -> ((x : Sid), (x : Z))
//│ res: (Sid & Z) -> (Sid, Z,)
//│    = [Function: res]
